(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e,t,r){e.exports=r.p+"static/media/mongoleaf.0ebc1843.png"},203:function(e,t,r){e.exports=r.p+"static/media/pixelatedLeaf.6c93bd20.svg"},211:function(e,t,r){e.exports=r(485)},480:function(e,t,r){},485:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"login",function(){return pt}),r.d(n,"register",function(){return mt}),r.d(n,"logout",function(){return ht}),r.d(n,"updatePrefs",function(){return ft}),r.d(n,"checkAdminStatus",function(){return gt}),r.d(n,"beginAdminCheck",function(){return vt}),r.d(n,"adminSuccess",function(){return bt}),r.d(n,"adminFail",function(){return Et}),r.d(n,"savePrefs",function(){return kt}),r.d(n,"failSavePrefs",function(){return wt}),r.d(n,"loggedOut",function(){return Ot}),r.d(n,"loginSuccess",function(){return yt}),r.d(n,"loginFail",function(){return St});var a={};r.r(a),r.d(a,"toggleDrawer",function(){return Dt}),r.d(a,"clearError",function(){return Vt});var i={};r.r(i),r.d(i,"viewMovie",function(){return Jt}),r.d(i,"receivedMovies",function(){return Zt}),r.d(i,"receivedSearchResults",function(){return Xt}),r.d(i,"movieDetail",function(){return Yt}),r.d(i,"fetchMovies",function(){return Kt}),r.d(i,"searchMovies",function(){return qt}),r.d(i,"searchByFacet",function(){return Qt}),r.d(i,"searchCountries",function(){return $t}),r.d(i,"receivedCountryResults",function(){return er}),r.d(i,"searchCountriesError",function(){return tr}),r.d(i,"receivedMovieByID",function(){return rr}),r.d(i,"fetchMovieByID",function(){return nr}),r.d(i,"fetchMoviesError",function(){return ar}),r.d(i,"fetchMovieByIDError",function(){return ir}),r.d(i,"searchMoviesError",function(){return or}),r.d(i,"beginPaging",function(){return cr}),r.d(i,"paginate",function(){return sr}),r.d(i,"receivedPagination",function(){return ur}),r.d(i,"submitComment",function(){return lr}),r.d(i,"receivedCommentSubmissionOk",function(){return dr}),r.d(i,"editComment",function(){return pr}),r.d(i,"receivedCommentUpdateOk",function(){return mr}),r.d(i,"deleteComment",function(){return hr}),r.d(i,"applyFacetFilter",function(){return fr});var o={};r.r(o),r.d(o,"validateFacetedSearch",function(){return Qr}),r.d(o,"canUseFacets",function(){return $r}),r.d(o,"validateFacetedSearchSuccess",function(){return tn}),r.d(o,"validateFacetedSearchError",function(){return rn}),r.d(o,"validateConnection",function(){return oa}),r.d(o,"validateConnectionSuccess",function(){return ca}),r.d(o,"validateConnectionError",function(){return sa}),r.d(o,"validateProjection",function(){return la}),r.d(o,"validateProjectionSuccess",function(){return da}),r.d(o,"validateProjectionError",function(){return pa}),r.d(o,"validateTextAndSubfield",function(){return ha}),r.d(o,"validateTextAndSubfieldSuccess",function(){return fa}),r.d(o,"validateTextAndSubfieldError",function(){return ga}),r.d(o,"validatePaging",function(){return ya}),r.d(o,"validatePagingSuccess",function(){return Sa}),r.d(o,"validatePagingError",function(){return Ca}),r.d(o,"validateUserManagement",function(){return Na}),r.d(o,"validateUserManagementSuccess",function(){return Ra}),r.d(o,"validateUserManagementError",function(){return Pa}),r.d(o,"validateUserPreferences",function(){return Ia}),r.d(o,"validateUserPreferencesSuccess",function(){return Ua}),r.d(o,"validateUserPreferencesError",function(){return Da}),r.d(o,"validateGetComments",function(){return Fa}),r.d(o,"validateGetCommentsSuccess",function(){return Ga}),r.d(o,"validateGetCommentsError",function(){return Ha}),r.d(o,"validateCreateUpdateComments",function(){return Ba}),r.d(o,"validateCreateUpdateCommentsSuccess",function(){return za}),r.d(o,"validateCreateUpdateCommentsError",function(){return Ja}),r.d(o,"validateDeleteComments",function(){return Xa}),r.d(o,"validateDeleteCommentsSuccess",function(){return Ya}),r.d(o,"validateDeleteCommentsError",function(){return Ka}),r.d(o,"validateUserReport",function(){return Qa}),r.d(o,"validateUserReportSuccess",function(){return $a}),r.d(o,"validateUserReportError",function(){return ei}),r.d(o,"validateMigration",function(){return ai}),r.d(o,"validateMigrationSuccess",function(){return ii}),r.d(o,"validateMigrationError",function(){return oi}),r.d(o,"validateConnectionPooling",function(){return ci}),r.d(o,"validateConnectionPoolingSuccess",function(){return si}),r.d(o,"validateConnectionPoolingError",function(){return ui}),r.d(o,"validateTimeouts",function(){return di}),r.d(o,"validateTimeoutsSuccess",function(){return pi}),r.d(o,"validateTimeoutsError",function(){return mi}),r.d(o,"validateErrorHandling",function(){return fi}),r.d(o,"validateErrorHandlingSuccess",function(){return gi}),r.d(o,"validateErrorHandlingError",function(){return vi}),r.d(o,"validatePOLP",function(){return Ei}),r.d(o,"validatePOLPSuccess",function(){return ki}),r.d(o,"validatePOLPError",function(){return wi});var c={};r.r(c),r.d(c,"fetchReport",function(){return Qi}),r.d(c,"fetchingReport",function(){return $i}),r.d(c,"receivedReportSuccess",function(){return eo}),r.d(c,"receivedReportFailure",function(){return to});var s=r(0),u=r.n(s),l=r(32),d=r.n(l),p=r(12),m=r(13),h=r(15),f=r(14),g=r(16),v=r(486),b=r(10),E=r(489),k=Object(b.b)(function(e){return{location:e.location}})(E.a),w=r(108),O=r(488),y=Object(b.b)(function(e){return{user:e.user}})(function(e){var t=e.component,r=e.redirectRoute,n=e.user,a=Object(w.a)(e,["component","redirectRoute","user"]);return u.a.createElement(v.a,Object.assign({},a,{render:function(e){return n.loggedIn?u.a.createElement(t,e):u.a.createElement(O.a,{to:r})}}))}),S=r(11),C=r(58),j=r.n(C),x=r(6),A=r(487),T=r(21),_=r.n(T),M=r(69),N=r.n(M),R=r(5),P=r(3),I="FETCH_MOVIES",U="FETCH_MOVIES_FAILURE",D="SEARCH_MOVIES",V="SEARCH_MOVIES_FAILURE",L="SEARCH_COUNTRIES_FAILURE",F="RECEIVED_COUNTRY_RESULTS",G="RECEIVED_MOVIES",H="MOVIE_DETAIL",W="RECEIVED_SEARCH_RESULTS",B="FETCH_MOVIE_BY_ID",z="FETCH_MOVIE_BY_ID_FAILURE",J="RECEIVED_MOVIE_BY_ID",Z="VIEW_MOVIE",X="PAGINATE_MOVIES",Y="RECEIVED_PAGINATION",K="BEGIN_PAGING",q="PROP_FACET_FILTER",Q="SUBMIT_COMMENT_SUCCESS",$="UPDATE_COMMENT_SUCCESS",ee="CLEAR_ERROR",te="FETCH_USER_REPORT",re="RECEIVED_USER_REPORT_FAILURE",ne="RECEIVED_USER_REPORT_SUCCESS",ae="TOGGLE_DRAWER",ie="NO_OP",oe="LOGIN_SUCCESS",ce="LOGIN_FAIL",se="LOGOUT",ue="SAVE_PREFS_SUCCESS",le="SAVE_PREFS_FAIL",de="CHECK_ADMIN",pe="CHECK_ADMIN_SUCCESS",me="CHECK_ADMIN_FAIL",he="VALIDATING_TICKET",fe="VALIDATE_CONNECTION",ge="VALIDATE_CONNECTION_SUCCESS",ve="VALIDATE_CONNECTION_ERROR",be="VALIDATE_PROJECTION",Ee="VALIDATE_PROJECTION_SUCCESS",ke="VALIDATE_PROJECTION_ERROR",we="VALIDATE_TEXT_AND_SUBFIELD",Oe="VALIDATE_TEXT_AND_SUBFIELD_SUCCESS",ye="VALIDATE_TEXT_AND_SUBFIELD_ERROR",Se="VALIDATE_PAGING",Ce="VALIDATE_PAGING_SUCCESS",je="VALIDATE_PAGING_ERROR",xe="VALIDATE_FACETED_SEARCH",Ae="VALIDATE_FACETED_SEARCH_SUCCESS",Te="VALIDATE_FACETED_SEARCH_ERROR",_e="VALIDATE_USER_MANAGEMENT",Me="VALIDATE_USER_MANAGEMENT_SUCCESS",Ne="VALIDATE_USER_MANAGEMENT_ERROR",Re="VALIDATE_USER_PREFERENCES",Pe="VALIDATE_USER_PREFERENCES_SUCCESS",Ie="VALIDATE_USER_PREFERENCES_ERROR",Ue="VALIDATE_GET_COMMENTS",De="VALIDATE_GET_COMMENTS_SUCCESS",Ve="VALIDATE_GET_COMMENTS_ERROR",Le="VALIDATE_CREATE_UPDATE_COMMENTS",Fe="VALIDATE_CREATE_UPDATE_COMMENTS_SUCCESS",Ge="VALIDATE_CREATE_UPDATE_COMMENTS_ERROR",He="VALIDATE_DELETE_COMMENTS",We="VALIDATE_DELETE_COMMENTS_SUCCESS",Be="VALIDATE_DELETE_COMMENTS_ERROR",ze="VALIDATE_USER_REPORT",Je="VALIDATE_USER_REPORT_SUCCESS",Ze="VALIDATE_USER_REPORT_ERROR",Xe="VALIDATE_MIGRATION",Ye="VALIDATE_MIGRATION_SUCCESS",Ke="VALIDATE_MIGRATION_ERROR",qe="VALIDATE_CONNECTION_POOLING",Qe="VALIDATE_CONNECTION_POOLING_SUCCESS",$e="VALIDATE_CONNECTION_POOLING_ERROR",et="VALIDATE_TIMEOUTS",tt="VALIDATE_TIMEOUTS_SUCCESS",rt="VALIDATE_TIMEOUTS_ERROR",nt="VALIDATE_ERROR_HANDLING",at="VALIDATE_ERROR_HANDLING_SUCCESS",it="VALIDATE_ERROR_HANDLING_ERROR",ot="VALIDATE_POLP",ct="VALIDATE_POLP_SUCCESS",st="VALIDATE_POLP_ERROR";function ut(e){return new Promise(function(t){return e.json().then(function(r){return t({status:e.status,ok:e.ok,json:r})})})}function lt(e,t){return new Promise(function(r,n){fetch(e,t).then(ut).then(function(e){return e.ok?r(e.json):n(e.json)}).catch(function(e){return n({error:e})})})}function dt(e,t){return new Promise(function(r,n){fetch(e,t).then(ut).then(function(e){var t=e.json,a=e.status,i=e.ok;return e.ok?r({json:t,status:a,ok:i}):n({json:t,status:a,ok:i})}).catch(function(e){return n({error:e})})})}function pt(e,t){return function(r){return lt("/api/v1/user/login",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return r(yt(e))}).then(t.push("/")).catch(function(e){return r(St({error:e}))})}}function mt(e,t){return function(r){return lt("/api/v1/user/register",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){r(yt(e))}).then(t.push("/")).catch(function(e){return r(St({error:e}))})}}function ht(e){return function(t){return lt("/api/v1/user/logout",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e),"content-type":"application/json"}}).then(t(Ot())).catch(t(Ot()))}}function ft(e,t){return function(r){var n=Object(P.a)({},t.info.preferences,e);return lt("/api/v1/user/update-preferences",{method:"PUT",mode:"cors",headers:{Authorization:"Bearer ".concat(t.auth_token),"content-type":"application/json"},body:JSON.stringify({preferences:n})}).then(r(kt(e))).catch(function(e){return r(wt())})}}function gt(e){return console.log("check admin status beginning function"),function(t){return t(vt()),lt("/api/v1/user/admin",{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e.auth_token),"content-type":"application/json"}}).then(function(e){return function(e){if("success"===!e.status)throw new Error("not authorized");return e}(e)}).then(function(){return t(bt())}).catch(function(){return t(Et())})}}function vt(){return{type:de}}function bt(){return console.log("admin check ok"),{type:pe}}function Et(){return console.log("admin check fail"),{type:me}}function kt(e){return{type:ue,preferences:e}}function wt(){return{type:le,error:"Failed to save user preference"}}function Ot(){return{type:se}}function yt(e){return{type:oe,user:e}}function St(e){return{type:ce,error:e}}var Ct=r(490),jt=N.a[900],xt=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).logout=r.logout.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"logout",value:function(){this.props.userActions.logout(this.props.user.auth_token,this.props.history)}},{key:"clickAdmin",value:function(){this.props.userActions.checkAdminStatus(this.props.user)}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.user,a=n.loggedIn?u.a.createElement(A.a,{to:"/",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle,onClick:this.logout},"logout")):u.a.createElement(A.a,{to:"/login",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle},"log in")),i=n.loggedIn?u.a.createElement(A.a,{to:"/account",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle},n.info.name)):u.a.createElement(A.a,{to:"/signup",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle},"sign up")),o=n.loggedIn&&n.info.isAdmin&&u.a.createElement(A.a,{to:"/admin",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle,onClick:function(){return e.clickAdmin()}},"admin"));return u.a.createElement("div",{className:r.root},o,u.a.createElement(A.a,{to:"/status",style:{textDecoration:"none"}},u.a.createElement(_.a,{className:r.buttonStyle},"status")),a,i)}}]),t}(s.Component),At=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{buttonStyle:{margin:e.spacing.unit-2,height:"18px",color:"white",background:jt},root:{alignItems:"center"}}}),Object(b.b)(function(e){return{user:e.user}},function(e){return{userActions:Object(R.b)(n,e)}}))(xt),Tt=r(36),_t=r.n(Tt),Mt=r(195),Nt=r.n(Mt),Rt=r(24),Pt=r.n(Rt),It=r(194),Ut=r.n(It);function Dt(){return{type:ae}}function Vt(e){return{type:ee,key:e}}var Lt=Pt.a[500],Ft={root:{borderBottom:"1px solid gray"},drawer:{display:"inline-flex",alignItems:"center",color:"white"},appbar:{display:"flex",height:"120px",width:"100vw",background:"#000000",justifyContent:"space-around",flexFlow:"wrap",alignItems:"center"},typography:{textAlign:"center",fontSize:"3em",color:Lt,fontWeight:"600",lineHeight:"1.125",marginLeft:"270px",fontFamily:"BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif"},leaf:{img:{height:"3em"}}};var Gt=Object(R.d)(Object(S.withStyles)(Ft),Object(b.b)(function(e){return{misc:e.misc}},function(e){return{miscActions:Object(R.b)(a,e)}}))(function(e){var t=e.classes;return u.a.createElement("div",{className:t.root},u.a.createElement("div",{className:t.appbar},u.a.createElement(_t.a,{className:t.drawer,onClick:e.miscActions.toggleDrawer},u.a.createElement(Nt.a,null)),u.a.createElement(j.a,{className:t.typography,type:"title"},u.a.createElement(A.a,{style:{textDecoration:"none",color:Lt},to:"/"},"mflix",u.a.createElement("img",{id:"mongoleaf",src:Ut.a,width:"40px",height:"40px",alt:"leaf"}))),u.a.createElement(At,null)))}),Ht=r(4),Wt=r.n(Ht),Bt=r(47),zt=r(8);function Jt(){return{type:Z}}function Zt(e){return Object(P.a)({type:G},e)}function Xt(e){return Object(P.a)({type:W},e)}function Yt(e){return{type:H,movie:e}}function Kt(){return function(e){return fetch("/api/v1/movies/",{method:"GET",mode:"cors"}).then(function(e){return e.json()}).then(function(t){return e(Zt(t))}).catch(function(t){return e(ar(t.message))})}}function qt(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=encodeURI(t);switch(e){case"genre":n="genre=".concat(i);break;case"cast":n="cast=".concat(i);break;default:n="text=".concat(i)}return a&&"cast"===e?Qt(n,r):function(t){return lt("/api/v1/movies/search?".concat(n),{method:"GET",mode:"cors"}).then(function(e){return t(Xt(e))}).then(function(){return r.push("/")}).catch(function(r){return t(or(e))})}}function Qt(e,t){return function(r){return lt("/api/v1/movies/facet-search?".concat(e),{method:"GET",mode:"cors"}).then(function(e){return r(Xt(e))}).then(function(){return t.push("/")}).catch(function(e){return r(or(e.message))})}}function $t(e,t){return function(r){var n=e.split(",").map(function(e){return"countries=".concat(e.trim())});return lt("/api/v1/movies/countries?".concat(encodeURI(n.join("&"))),{method:"GET",mode:"cors"}).then(function(e){return r(er(e.titles))}).then(function(){return t.push("/country-results")}).catch(function(e){return r(tr(e.message))})}}function er(e){return{type:F,titles:e}}function tr(e){return{type:L,error:"Unable to fetch movies from this country"}}function rr(e){return{type:J,movie:e.movie}}function nr(e,t){return function(r){return fetch("/api/v1/movies/id/".concat(e),{method:"GET",mode:"cors"}).then(function(e){return e.json()}).then(function(e){return r(rr(e))}).then(function(){return t.replace("/movies/id/".concat(e))}).catch(function(e){return r(ir(e.message))})}}function ar(e){return{type:U,error:"Unable to fetch movies"}}function ir(e){return{type:z,error:"Unable to fetch the movie by _id"}}function or(e){return{type:V,error:"Unable to search for "+e+"."}}function cr(){return{type:K}}function sr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var a=Object(zt.a)(Wt.a.mark(function a(i){var o,c;return Wt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=0!==Object.keys(r).length?"?"+(o=Object.keys(r).reduce(function(e,t){return[].concat(Object(Bt.a)(e),["".concat(t,"=").concat(r[t])])},[])).join("&")+"&page=".concat(t+1):"?page=".concat(t+1),c=Object.keys(r).includes("cast")&&n?"/api/v1/movies/facet-search".concat(encodeURI(o)):"/api/v1/movies/search".concat(encodeURI(o)),a.abrupt("return",lt(c,{method:"GET",mode:"cors"}).then(function(r){return i(ur(e,t,r,i))}).catch(function(e){return i(ar(e.message))}));case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}function ur(e,t,r,n){var a=e.map(function(e){return e._id}),i=r.movies.filter(function(e){return!a.includes(e._id)}),o=(i=[].concat(Object(Bt.a)(e),Object(Bt.a)(i))).length>e.length?r.page:t;return o!==t?Object(P.a)({type:Y},r,{movies:i,page:o,facets:r.facets}):{type:ie}}function lr(e,t,r){return function(n){return lt("/api/v1/movies/comment",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify({movie_id:e,comment:t})}).then(function(e){return n(dr(e))}).catch(function(e){return console.log(e)})}}function dr(e){return{type:Q,comments:e.comments}}function pr(e,t,r,n){return function(a){return lt("/api/v1/movies/comment",{method:"PUT",mode:"cors",headers:{Authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify({comment_id:e,updated_comment:t,movie_id:n})}).then(function(e){return a(mr(e))}).catch(function(e){return console.log(e)})}}function mr(e){return{type:$,comments:e.comments}}function hr(e,t,r){return function(n){return lt("/api/v1/movies/comment",{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({comment_id:e,movie_id:r})}).then(function(e){return n(mr(e))}).catch(function(e){return console.log(e)})}}function fr(e,t,r){return{type:q,payload:{facet:e,key:t,filter:r}}}var gr=function(e){return u.a.createElement("div",{style:{backgroundColor:"black",color:"white",textAlign:"center"}},u.a.createElement("i",{className:"material-icons red",onClick:function(){return e.dismiss(e.error)}},"cancel"),e.msg)},vr=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.errors,r=Object.keys(t).filter(function(e){return""!==t[e]}).map(function(r){return u.a.createElement("div",{key:r,style:{backgroundColor:"black",color:"white",textAlign:"center"}},u.a.createElement(gr,{msg:t[r],dismiss:e.props.clearError,error:r}))});return u.a.createElement(u.a.Fragment,null,r)}}]),t}(s.Component);var br=Object(R.d)(Object(b.b)(function(e){return{errors:e.errors}},function(e){return{movieActions:Object(R.b)(i,e),clearError:Object(R.b)(Vt,e)}}))(vr),Er=r(99),kr=r.n(Er),wr=r(197),Or=r.n(wr),yr=Pt.a[500],Sr={tile:{display:"inline-flex",background:"#242424",margin:"1vw",height:"675px",width:"320px",borderRadius:4,flexDirection:"column",alignItems:"center",textAlign:"center"},img:{margin:"15px",alignSelf:"flex-center",width:"90%",height:"400px"},title:{color:yr,fontWeight:320,lineHeight:1.125,fontSize:"1.125em",margin:"10px",fontFamily:"BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif"},infoContainer:{margin:"15px"},year:{borderRadius:"100%",background:"#363636",padding:".25em .75em",marginRight:"4px",color:"#E0E0E0",fontSize:".9rem",fontFamily:"Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif"},rating:{borderRadius:"290486px",background:"#ffdd57",padding:".25em .75em",marginLeft:"4px",color:"black",fontSize:".9rem",fontFamily:"Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif"},cast:{color:"#E0E0E0",padding:"0 15px",fontWeight:300,lineHeight:1.2,fontSize:"18px"},imdb:{color:"#e0e0e0",fontSize:"14px"},scoreBackground:{color:"#e0e0e0",padding:"0 10px",borderRadius:"4px",fontSize:"14px"}},Cr=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleClick=r.handleClick.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"imgEvent",value:function(e){var t=e.id,r=e.imgError,n=document.getElementById(t),a=n.parentNode.getContext("2d");r?(a.font="20pt Calibri",a.textAlign="center",a.fillStyle="white",a.fillText("Image failed to load",150,222)):a.drawImage(n,0,0,300,444)}},{key:"handleClick",value:function(){this.props.movieActions.movieDetail(this.props.movie._id)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.classes,a=r.movie,i=a.cast?"Starring: ".concat(a.cast.join(", ")):"",o=a.imdb&&a.imdb.rating?"IMDB: ".concat(a.imdb.rating," / 10"):"";return u.a.createElement("div",{className:n.tile,onClick:this.handleClick},u.a.createElement(A.a,{style:{textDecoration:"none"},to:"movies/id/".concat(a._id)},u.a.createElement("canvas",{width:300,height:444,className:n.img},u.a.createElement("img",{id:a._id,className:n.img,src:a.poster||"",alt:a.title,title:a.title,onLoad:function(){return t.imgEvent({id:a._id,imgError:!1})},onError:function(){return t.imgEvent({id:a._id,imgError:!0})}})),u.a.createElement("p",{className:n.title},a.title),u.a.createElement("div",{className:n.infoContainer},u.a.createElement("span",{className:n.year},a.year),a.rated&&u.a.createElement("span",{className:n.rating},a.rated)),u.a.createElement("p",{className:n.cast},i),u.a.createElement("div",null,o&&u.a.createElement("span",{className:n.scoreBackground,style:(e=a.imdb.rating,e>=8?{backgroundColor:yr}:e>=6?{backgroundColor:"#3273dc"}:e?{backgroundColor:"red"}:{backgroundColor:"rgba(0, 0, 0, 0)"})},o))))}}]),t}(s.Component);var jr=Object(R.d)(Object(S.withStyles)(Sr),Object(b.b)(function(){return{}},function(e){return{movieActions:Object(R.b)(i,e)}}))(Cr),xr=r(100),Ar=r.n(xr),Tr=r(137),_r=r.n(Tr),Mr=r(45),Nr=r.n(Mr),Rr=r(196),Pr=r.n(Rr),Ir={root:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},facets:{alignItems:"center",background:"black",color:"white"},checked:{color:Pt.a[500]},label:{color:Pt.a[500]}},Ur=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleRatingFacetSelection=function(e){return function(t){var n;switch(e+""){case"0":n=function(e){return e.metacritic&&e.metacritic>=0&&e.metacritic<50};break;case"50":n=function(e){return e.metacritic&&e.metacritic>=50&&e.metacritic<70};break;case"70":n=function(e){return e.metacritic&&e.metacritic>=70&&e.metacritic<90};break;case"90":n=function(e){return e.metacritic&&e.metacritic>=90};break;default:n=function(e){return!e.metacritic||"string"===typeof e.metacritic}}r.props.movieActions.applyFacetFilter("rating",e,n)}},r.handleRuntimeFacetSelection=function(e){return function(t){var n;switch(e+""){case"0":n=function(e){return e.runtime&&e.runtime>=0&&e.runtime<60};break;case"60":n=function(e){return e.runtime&&e.runtime>=60&&e.runtime<90};break;case"90":n=function(e){return e.runtime&&e.runtime>=90&&e.runtime<120};break;case"120":n=function(e){return e.runtime&&e.runtime>=120&&e.runtime<180};break;case"180":n=function(e){return e.runtime&&e.runtime>=180};break;default:n=function(e){return!e.runtime||!e.runtime<0&&e.runtime<=1/0}}r.props.movieActions.applyFacetFilter("runtime",e,n)}},r.ratingFacet=r.ratingFacet.bind(Object(x.a)(Object(x.a)(r))),r.runtimeFacet=r.runtimeFacet.bind(Object(x.a)(Object(x.a)(r))),r.handleRatingFacetSelection=r.handleRatingFacetSelection.bind(Object(x.a)(Object(x.a)(r))),r.handleRuntimeFacetSelection=r.handleRuntimeFacetSelection.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"formGroup",value:function(e,t,r,n){return u.a.createElement(_r.a,{row:!0,key:t._id},u.a.createElement(Nr.a,{classes:{label:this.props.classes.label},control:u.a.createElement(Pr.a,{classes:{default:this.props.classes.label},checked:this.props.facetFilters[e][t._id],onChange:n(t._id),value:t._id+""}),label:r}))}},{key:"runtimeFacet",value:function(){var e=this,t=this.props.classes,r=this.props.facets.runtime;return u.a.createElement("div",{className:t.root},u.a.createElement("h4",{style:{color:"white",marginRight:"20px"}},"Runtime:"),r.map(function(t){switch(t._id+""){case"0":return e.formGroup("runtime",t,"0-59 (".concat(t.count,")"),e.handleRuntimeFacetSelection);case"60":return e.formGroup("runtime",t,"60-89 (".concat(t.count,")"),e.handleRuntimeFacetSelection);case"90":return e.formGroup("runtime",t,"90-119 (".concat(t.count,")"),e.handleRuntimeFacetSelection);case"120":return e.formGroup("runtime",t,"120-180 (".concat(t.count,")"),e.handleRuntimeFacetSelection);case"180":return e.formGroup("runtime",t,"180+ (".concat(t.count,")"),e.handleRuntimeFacetSelection);default:return e.formGroup("runtime",t,"other (".concat(t.count,")"),e.handleRuntimeFacetSelection)}}))}},{key:"ratingFacet",value:function(){var e=this,t=this.props.classes,r=this.props.facets.rating;return u.a.createElement("div",{className:t.root},u.a.createElement("h4",{style:{color:"white",marginRight:"20px"}},"Rating:"),r.map(function(t){switch(t._id+""){case"0":return e.formGroup("rating",t,"0-49 (".concat(t.count,")"),e.handleRatingFacetSelection);case"50":return e.formGroup("rating",t,"50-69 (".concat(t.count,")"),e.handleRatingFacetSelection);case"70":return e.formGroup("rating",t,"70-89 (".concat(t.count,")"),e.handleRatingFacetSelection);case"90":return e.formGroup("rating",t,"90+ (".concat(t.count,")"),e.handleRatingFacetSelection);default:return e.formGroup("rating",t,"other (".concat(t.count,")"),e.handleRatingFacetSelection)}}))}},{key:"render",value:function(){var e=this.props.classes,t=this.ratingFacet(),r=this.runtimeFacet();return u.a.createElement("div",null,u.a.createElement("div",{className:e.facets},Object.keys(this.props.facets.rating).length>0&&t),u.a.createElement("div",{className:e.facets},Object.keys(this.props.facets.runtime).length>0&&r))}}]),t}(s.Component);var Dr=Object(R.d)(Object(S.withStyles)(Ir),Object(b.b)(function(e){e.misc;var t=e.movies;return{facets:t.facets,facetFilters:t.facetFilters}},function(e){return{movieActions:Object(R.b)(i,e)}}))(Ur),Vr=function(e,t,r){var n=encodeURIComponent(t);return lt("/api/v1/movies/search?".concat(e,"=").concat(n,"&page=").concat(r),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},Lr=function(e,t){var r=encodeURIComponent(e);return lt("/api/v1/movies/facet-search?cast=".concat(r,"&page=").concat(t),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},Fr=function(e,t){return e===t};function Gr(e){return{type:he,ticket:e}}var Hr=function(){return{name:Math.random().toString(36).substr(2,9),email:"".concat(Math.random().toString(36).substr(2,9),"@").concat(Math.random().toString(36).substr(2,5),".").concat(Math.random().toString(36).substr(2,3)),password:"".concat(Math.random().toString(36).substr(2,9))}},Wr=function(e,t){return dt("/api/v1/user/delete",{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({password:t.password})}).then(function(e){return e}).catch(function(e){return e})},Br=function(e){return dt("/api/v1/user/logout",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e),"content-type":"application/json"}}).then(function(e){return e}).catch(function(e){return e})},zr=function(e){return dt("/api/v1/user/login",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e}).catch(function(e){return e})},Jr=function(e){return dt("/api/v1/user/register",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e}).catch(function(e){return e})};function Zr(e){return lt("/api/v1/movies/id/".concat(e),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})}function Xr(e,t,r){return dt("/api/v1/movies/comment",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify({movie_id:e,comment:t})}).then(function(e){return e}).catch(function(e){return e})}function Yr(e,t,r,n){return dt("/api/v1/movies/comment",{method:"PUT",mode:"cors",headers:{Authorization:"Bearer ".concat(r),"content-type":"application/json"},body:JSON.stringify({comment_id:e,updated_comment:t,movie_id:n})}).then(function(e){return e}).catch(function(e){return e})}function Kr(e,t,r){return dt("/api/v1/movies/comment",{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({comment_id:e,movie_id:r})}).then(function(e){return e}).catch(function(e){return e})}var qr=new Error("Did not receive the proper response when performing a faceted search");function Qr(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("FacetedSearch")),e.prev=1,e.next=4,$r();case 4:if(!e.sent){e.next=8;break}t(tn()),e.next=9;break;case 8:throw qr;case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",t(rn(e.t0)));case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}function $r(){return en.apply(this,arguments)}function en(){return(en=Object(zt.a)(Wt.a.mark(function e(){var t,r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn();case 3:return t=e.sent,e.next=6,an();case 6:if(r=e.sent,![t,r].every(function(e){return e})){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,11]])}))).apply(this,arguments)}function tn(){return{type:Ae}}function rn(e){return{type:Te,error:e}}var nn=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o,c;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lr("Denzel Washington",0);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.facets,a=n.rating,i=n.runtime,o=Fr(4,a.length),c=Fr(3,i.length),!(r&&o&&c)){e.next=12;break}return e.abrupt("return",!0);case 12:throw qr;case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),qr;case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}(),an=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o,c;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lr("Morgan Freeman",2);case 3:if(t=e.sent,r=Fr(8,t.movies.length),n=t.facets,a=n.rating,i=n.runtime,o=Fr(3,a.length),c=Fr(3,i.length),!(r&&o&&c)){e.next=12;break}return e.abrupt("return",!0);case 12:throw new Error("Did not receive the proper response when performing a faceted search with paging");case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Error("Did not receive the proper response when performing a faceted search with paging");case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}(),on=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={paging:!1,movies:[],useFacet:!1},r.onScroll=kr()(r.onScroll.bind(Object(x.a)(Object(x.a)(r))),1e3),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.movies&&0!==this.props.movies.movies.length||this.props.movieActions.fetchMovies(),function(){var t=Object(zt.a)(Wt.a.mark(function t(){return Wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$r();case 3:if(!t.sent){t.next=5;break}e.setState({useFacet:!0});case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}()(),window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll,!0),this.onScroll.cancel()}},{key:"componentWillReceiveProps",value:function(e){e.movies.movies.length===e.movies.total_results&&(this.setState({paging:!1}),this.onScroll.cancel(),window.removeEventListener("scroll",this.onScroll,!0)),e.movies.paging||(this.setState({paging:!1}),this.onScroll.cancel())}},{key:"onScroll",value:function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("root"),!this.props.movies.paging&&document.body.offsetHeight+window.pageYOffset>=t.scrollHeight-1500&&this.props.movies.movies.length!==this.props.movies.total_results&&(this.props.movieActions.beginPaging(),this.props.movieActions.paginate(this.props.movies.movies,this.props.movies.page,this.props.movies.filters,this.state.useFacet));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.props.movies.shownMovies;return t&&(0!==t.length||this.props.errors.FetchMovieFailure&&this.props.searchMovieFailure)?u.a.createElement("div",{className:this.props.classes.root,onScroll:this.onScroll,id:"scroll"},u.a.createElement(Dr,null),u.a.createElement(Or.a,{cellHeight:600,className:this.props.classes.gridList,cols:4},t.map(function(e){return u.a.createElement(jr,{key:e._id,movie:e})}))):u.a.createElement("div",{className:e.loading},u.a.createElement(Ar.a,null))}}]),t}(s.Component);var cn=Object(R.d)(Object(S.withStyles)(function(e){return{root:{flex:1,flexWrap:"wrap",justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",minHeight:"100vh",height:"100%",flexBasis:0},gridList:{height:"100%",justifyContent:"center",backgroundColor:"black",width:"100vw",flexBasis:0,flexGrow:0},loading:{display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"black",alignItems:"center",width:"100vw",height:"100vh"}}}),Object(b.b)(function(e){return{movies:e.movies,errors:e.errors}},function(e){return{movieActions:Object(R.b)(i,e)}}))(on),sn=function(e){function t(){var e,r;Object(p.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){r.props.movieActions.fetchMovieByID(e,r.props.history)},r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.movies.titles.map(function(t,n){return u.a.createElement("li",{className:r.li,key:n,onClick:function(){return e.handleClick(t._id)}},t.title)});return u.a.createElement("div",{className:r.root},u.a.createElement("ul",{className:r.ul},n))}}]),t}(s.Component);var un=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{display:"flex",flex:1,flexWrap:"wrap",justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",minHeight:"100vh",height:"100%",flexBasis:0},ul:{listStyle:"none",textAlign:"center"},li:{fontSize:"2em",color:"green",cursor:"pointer"}}}),Object(b.b)(function(e){return{movies:e.movies,errors:e.errors}},function(e){return{movieActions:Object(R.b)(i,e)}}))(sn),ln=r(28),dn=r(35),pn=r.n(dn),mn=r(37),hn=r.n(mn),fn=r(46),gn=r.n(fn),vn=r(33),bn=r.n(vn),En=r(103),kn=r.n(En),wn=r(102),On=r.n(wn),yn=r(101),Sn=r.n(yn),Cn=Pt.a[500],jn=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){return function(t){r.setState(Object(ln.a)({},e,t.target.value))}},r.handleMouseDownPassword=function(e){e.preventDefault()},r.handleClickShowPasssword=function(){r.setState({showPassword:!r.state.showPassword})},r.handleFocusEmail=function(){r.setState({emailReadOnly:!1})},r.handleFocusPassword=function(){r.setState({passwordReadOnly:!1})},r.state={email:"",password:"",showPassword:!1,emailReadOnly:!0,passwordReadOnly:!0},r.handleSubmit=r.handleSubmit.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.userActions.login({password:this.state.password,email:this.state.email},this.props.history)}},{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{className:e.root},u.a.createElement("form",{className:e.form},u.a.createElement("div",{className:e.newUser},u.a.createElement("h3",null,"Existing User?"),u.a.createElement("p",null,"Sign in below. Don't have an account?"," ",u.a.createElement(A.a,{to:"signup",style:{textDecoration:"none",color:"gray"}},"Click here"))),u.a.createElement("input",{type:"text",style:{display:"none"}}),u.a.createElement("input",{type:"password",style:{display:"none"}}),u.a.createElement(bn.a,{className:e.newUser},u.a.createElement(hn.a,{style:{color:"white"},htmlFor:"email"},"Email"),u.a.createElement(pn.a,{style:{color:"white"},id:"adornment-login-email",type:"email",readOnly:this.state.emailReadOnly,onFocus:this.handleFocusEmail,value:this.state.email,autoComplete:"email",onChange:this.handleChange("email"),endAdornment:u.a.createElement(gn.a,{position:"end"},u.a.createElement(_t.a,{className:e.newUser},u.a.createElement(Sn.a,null)))})),u.a.createElement(bn.a,{style:{color:"white"},className:e.newUser},u.a.createElement(hn.a,{style:{color:"white"},htmlFor:"password"},"Password"),u.a.createElement(pn.a,{style:{color:"white"},id:"adornment-login-password",autoComplete:"off",readOnly:this.state.passwordReadOnly,type:this.state.showPassword?"text":"password",value:this.state.password,onFocus:this.handleFocusPassword,onChange:this.handleChange("password"),endAdornment:u.a.createElement(gn.a,{position:"end"},u.a.createElement(_t.a,{className:e.newUser,onClick:this.handleClickShowPasssword,onMouseDown:this.handleMouseDownPassword},this.state.showPassword?u.a.createElement(On.a,null):u.a.createElement(kn.a,null)))})),u.a.createElement("div",{className:e.buttonRow},u.a.createElement(_.a,{className:e.buttonNope},u.a.createElement(A.a,{style:{textDecoration:"none",color:"white"},to:"/"},"Cancel")),u.a.createElement(_.a,{className:e.buttonOk,onClick:this.handleSubmit},"Log In"))))}}]),t}(s.Component);var xn=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",height:"100vh",display:"flex"},form:{display:"inline-flex",flexDirection:"column",color:"white",margin:"3%",padding:"25px",background:"#363636",marginTop:"5%",borderRadius:"8px",width:"320px",height:"450px"},input:{color:"white",background:"#e0e0e0"},newUser:{margin:e.spacing.unit,color:"white"},inputStyle:{fontSize:"18px",color:"white",borderRadius:"4px"},buttonOk:{margin:e.spacing.unit,height:"18px",color:"white",background:Cn,alignSelf:"flex-end"},buttonNope:{margin:e.spacing.unit,height:"18px",color:"white",background:"red",alignSelf:"flex-end"},buttonRow:{margin:e.spacing.unit,marginTop:"auto",display:"inline-flex",flexDirection:"row",alignSelf:"flex-end",justifyContent:"flex-end"}}}),Object(b.b)(function(e){return{user:e.user}},function(e){return{userActions:Object(R.b)(n,e)}}))(jn),An=r(198),Tn=r.n(An),_n=Pt.a[500],Mn=function(e){function t(){var e,r;Object(p.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",email:"",password:"",showPassword:!1},r.handleSubmit=function(e){e.preventDefault(),r.props.userActions.register({name:r.state.name,email:r.state.email,password:r.state.password},r.props.history)},r.handleChange=function(e){return function(t){r.setState(Object(ln.a)({},e,t.target.value))}},r.handleMouseDownPassword=function(e){e.preventDefault()},r.handleClickShowPasssword=function(){r.setState({showPassword:!r.state.showPassword})},r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{className:e.root},u.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},u.a.createElement("div",{className:e.newUser},u.a.createElement("h3",null,"New User?"),u.a.createElement("p",null,"Make an account by filling out the form below.")),u.a.createElement(bn.a,{className:e.newUser},u.a.createElement(hn.a,{style:{color:"white"},htmlFor:"name"},"Name"),u.a.createElement(pn.a,{id:"adornment-name",autoCapitalize:"name",style:{color:"white"},value:this.state.name,onChange:this.handleChange("name"),autoComplete:"name",endAdornment:u.a.createElement(gn.a,{position:"end"},u.a.createElement(_t.a,{className:e.newUser},u.a.createElement(Tn.a,null)))})),u.a.createElement(bn.a,{className:e.newUser},u.a.createElement(hn.a,{style:{color:"white"},htmlFor:"password"},"Email"),u.a.createElement(pn.a,{id:"adornment-email",style:{color:"white"},type:"email",value:this.state.email,onChange:this.handleChange("email"),autoComplete:"email",endAdornment:u.a.createElement(gn.a,{position:"end"},u.a.createElement(_t.a,{className:e.newUser},u.a.createElement(Sn.a,null)))})),u.a.createElement(bn.a,{style:{color:"white"},className:e.newUser},u.a.createElement(hn.a,{style:{color:"white"},htmlFor:"password"},"Password"),u.a.createElement(pn.a,{style:{color:"white"},id:"adornment-password",type:this.state.showPassword?"text":"password",value:this.state.password,onChange:this.handleChange("password"),autoComplete:"password",endAdornment:u.a.createElement(gn.a,{position:"end"},u.a.createElement(_t.a,{className:e.newUser,onClick:this.handleClickShowPasssword},this.state.showPassword?u.a.createElement(On.a,null):u.a.createElement(kn.a,null)))})),u.a.createElement("div",{className:e.buttonRow},u.a.createElement(_.a,{className:e.buttonNope},u.a.createElement(A.a,{style:{textDecoration:"none",color:"white"},to:"/"},"Cancel")),u.a.createElement(_.a,{type:"submit",className:e.buttonOk},"Sign Up"))))}}]),t}(s.Component);var Nn=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",height:"100vh",display:"flex"},form:{display:"inline-flex",flexDirection:"column",color:"white",margin:"3%",padding:"25px",background:"#363636",marginTop:"5%",borderRadius:"8px",width:"320px",height:"450px"},input:{color:"white"},newUser:{margin:e.spacing.unit,color:"white"},inputStyle:{fontSize:"18px",color:"white",borderRadius:"4px"},buttonOk:{margin:e.spacing.unit,height:"18px",color:"white",background:_n,alignSelf:"flex-end"},buttonNope:{margin:e.spacing.unit,height:"18px",color:"white",background:"red",alignSelf:"flex-end"},buttonRow:{margin:e.spacing.unit,marginTop:"auto",display:"inline-flex",flexDirection:"row",alignSelf:"flex-end",justifyContent:"flex-end"}}}),Object(b.b)(function(e){return{user:e.user}},function(e){return{userActions:Object(R.b)(n,e)}}))(Mn),Rn=Object(S.withStyles)(function(e){return{progressBar:{marginTop:"15px",height:"20px",width:"100%",background:"#555",borderRadius:"25px",boxShadow:"inset 0 -1px 1px rgba(255, 255, 255, 0.3)","& > span":{display:"block",height:"100%",borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px",backgroundImage:"linear-gradient(center bottom, rgb(43,194,83) 37%, rgb(84,240,84) 69%)",boxShadow:"inset 0 2px 9px  rgba(255,255,255,0.3), inset 0 -2px 6px rgba(0,0,0,0.4)",overflow:"hidden"}}}})(function(e){var t=e.classes,r=e.ratings,n=Object.keys(r).map(function(e,n){var a=function(e){var t=e;return e<=10&&(t=10*e),t>=80?{width:"".concat(t,"%")}:t>=60?{width:"".concat(t,"%")}:t?{width:"".concat(t,"%")}:void 0}(r[e][e]),i=e.charAt(0).toUpperCase()+e.slice(1),o=r[e].total&&r[e].total;return u.a.createElement("div",{key:n},u.a.createElement("h4",{style:{color:"white",textAlign:"justify"}},i," Rating: ",r[e][e].toLocaleString()," ",o&&"(from ".concat((new Intl.NumberFormat).format(o)," reviews)")),u.a.createElement("div",{key:n,className:t.progressBar},u.a.createElement("span",{style:{backgroundColor:r[e].backgroundColor,width:a.width}}),u.a.createElement("p",{style:{width:"100%",height:"100%",margin:"0 auto",top:"-100%",position:"relative",color:"white"}})))});return u.a.createElement("div",null,n)}),Pn=r(95),In=r.n(Pn),Un=r(199);var Dn=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleClose=function(){r.props.movieActions.viewMovie()},r.state={open:e.open},r.handleReady=r.handleReady.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleReady",value:function(e){var t=document.querySelector("video");t&&(t.play(),t.autoplay=!0)}},{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",{allow:"autoplay"},u.a.createElement(In.a,{"aria-labelledby":"video-viewer","aria-describedby":"watch-video",open:this.props.displayModal,onClose:this.handleClose},u.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},u.a.createElement(Un.a,{videoId:Math.random()<.5?"6gGXnE1Dbh0":"dQw4w9WgXcQ",opts:{height:"390",width:"640"},onReady:this.handleReady}))))}}]),t}(u.a.Component);var Vn=Object(R.d)(Object(S.withStyles)(function(e){return{paper:{position:"absolute",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit}}}),Object(b.b)(function(e,t){var r=e.movies.viewMovie;return t.match,{displayModal:r}},function(e){return{movieActions:Object(R.b)(i,e)}}))(Dn),Ln=r(104),Fn=r.n(Ln),Gn=r(105),Hn=r.n(Gn),Wn=r(106),Bn=r.n(Wn),zn=r(202),Jn=r.n(zn),Zn=r(70),Xn=r.n(Zn),Yn=function(e){function t(){var e,r;Object(p.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={editing:!1},r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleUpdate",value:function(){this.props.handleUpdate(this.props.cid,this.divComment.innerText)}},{key:"handleDelete",value:function(){this.props.handleDelete(this.props.cid)}},{key:"handleEdit",value:function(){this.setState({editing:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes;return u.a.createElement("div",null,u.a.createElement(Fn.a,{className:t.card},u.a.createElement(Hn.a,{avatar:u.a.createElement(Jn.a,{"aria-label":"user",className:t.avatar},"U"),title:this.props.name,subheader:this.props.date}),u.a.createElement(Bn.a,null,u.a.createElement("div",{ref:function(t){e.divComment=t},className:t.typography,contentEditable:this.props.editable},this.props.text)),this.props.editable&&u.a.createElement("div",{className:t.buttons},u.a.createElement(_.a,{className:t.buttonDelete,onClick:function(){return e.handleDelete()}}," ","delete"," "),u.a.createElement(_.a,{className:t.buttonSubmit,onClick:function(){return e.handleUpdate()}},"update"))))}}]),t}(u.a.Component),Kn=Object(S.withStyles)(function(e){return{card:{width:"65vw",borderRadius:"5px",margin:"1%"},avatar:{backgroundColor:Pt.a[500]},typography:{textAlign:"justify"},buttons:{display:"inline-flex",flexDirection:"row",width:"100%",justifyContent:"flex-end"},buttonSubmit:{margin:e.spacing.unit-2,height:"18px",color:"white",background:Pt.a[500]},buttonDelete:{margin:e.spacing.unit-2,height:"18px",color:"white",background:Xn.a[500]}}})(Yn),qn=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleSubmit=r.handleSubmit.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(){this.props.movieActions.submitComment(this.props.movieID,this.divComment.innerText,this.props.auth_token),this.divComment.innerText=""}},{key:"render",value:function(){var e=this,t=this.props.classes;return u.a.createElement("div",null,u.a.createElement(Fn.a,{className:t.card},u.a.createElement(Hn.a,{title:"Submit a comment"}),u.a.createElement(Bn.a,null,u.a.createElement("div",{contentEditable:!0,className:t.typography,ref:function(t){e.divComment=t}})),u.a.createElement("div",{className:t.buttonDiv},u.a.createElement(_.a,{className:t.buttonSubmit,onClick:this.handleSubmit},"submit"))))}}]),t}(u.a.Component);var Qn=Object(R.d)(Object(S.withStyles)(function(e){return{card:{width:"65vw",borderRadius:"5px",margin:"1%"},avatar:{backgroundColor:Pt.a[500]},typography:{textAlign:"justify",width:"100%",height:"100%",margin:"2% auto",border:"1px solid blue"},buttonDiv:{display:"inline-flex",flexDirection:"row",width:"100%",justifyContent:"flex-end"},buttonSubmit:{margin:e.spacing.unit-2,height:"18px",color:"white",background:Pt.a[500]}}}),Object(b.b)(function(e){return{auth_token:e.user.auth_token}},function(e){return{movieActions:Object(R.b)(i,e)}}))(qn),$n=Pt.a[500],ea=function(e){return Object.keys(e).reduce(function(t,r){var n;switch(r){case"imdb":var a;return e[r].rating?Object(P.a)({},t,{imdb:(a={},Object(ln.a)(a,r,e[r].rating),Object(ln.a)(a,"backgroundColor","#3273dc"),Object(ln.a)(a,"total",e[r].votes),a)}):t;case"metacritic":return Object(P.a)({},t,{metacritic:(n={},Object(ln.a)(n,r,e[r]),Object(ln.a)(n,"backgroundColor",$n),n)});case"tomatoes":var i;return e[r]&&e[r].viewer&&e[r].viewer.meter?Object(P.a)({},t,{tomatoes:(i={},Object(ln.a)(i,r,e[r].viewer.meter),Object(ln.a)(i,"backgroundColor","red"),Object(ln.a)(i,"total",e[r].viewer.numReviews),i)}):t;default:return t}},{})},ta={root:{display:"flex",background:"black",justifyContent:"space-around",width:"100vw",textAlign:"center",flexDirection:"row",flexFlow:"wrap"},half:{marginTop:"65px",minWidth:"450px",maxWidth:"45%",flexDirection:"column",alignItems:"center",flex:"0 0 auto",height:"100vh"},img:{width:"300px",height:"444px"},watchButton:{margin:"8px",color:"white",alignItems:"center"},button:{height:"18px",color:"white",background:$n},title:{color:"white",fontWeight:320,lineHeight:1.125,fontSize:"2em",margin:"15px"},runtime:{color:"black",fontSize:"12px",background:"#d5d5d5",padding:"5px",margin:"15px",borderRadius:"4px"},director:{color:"white",marginTop:"20px",margin:"15px"},directorText:{color:$n,marginLeft:"5px",background:"#474747",padding:"5px",borderRadius:"5px"},plotContainer:{display:"inline-flex",justifyContent:"center",background:"#363636",width:"100%",padding:"10px 0",borderRadius:"7px",marginTop:"15px",textAlign:"center"},plot:{margin:"15px",color:"white",fontSize:"1rem",lineHeight:"1.5em",width:"80%",height:"80%",textAlign:"justify"},year:{borderRadius:"290486px",background:"#363636",padding:".25em .75em",marginRight:"4px",color:"#E0E0E0",fontSize:".9rem"},rating:{borderRadius:"290486px",background:"#ffdd57",padding:".25em .75em",marginLeft:"4px",color:"black",fontSize:".9rem"},cast:{color:"#E0E0E0",padding:"0 15px",fontWeight:300,lineHeight:1.2,fontSize:"18px"},skittlesHeader:{color:"white",marginBottom:"10px"},skittlesContainer:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center",color:"white"},genresSkittles:{color:"white",fontSize:"12px",background:"#363636",padding:"5px",margin:"0 5px",borderRadius:"4px",float:"left","&:hover":{textDecoration:"underline",cursor:"pointer"}},castSkittles:{color:"white",fontSize:"12px",background:$n,padding:"5px",margin:"0 5px",borderRadius:"4px",float:"left","&:hover":{textDecoration:"underline",cursor:"pointer"}},writerSkittles:{color:"white",fontSize:"12px",background:"#363636",padding:"5px",margin:"0 5px",borderRadius:"4px",float:"left"}},ra=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).rain=null,r.makeRainTimeout=null,r.matrixInterval=null,r.handleViewClick=r.handleViewClick.bind(Object(x.a)(Object(x.a)(r))),r.handleSearch=r.handleSearch.bind(Object(x.a)(Object(x.a)(r))),r.handleUpdate=r.handleUpdate.bind(Object(x.a)(Object(x.a)(r))),r.handleDelete=r.handleDelete.bind(Object(x.a)(Object(x.a)(r))),r.imgError=r.imgError.bind(Object(x.a)(Object(x.a)(r))),r.state={matrix:!1},r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"makeRain",value:function(){var e=this.canvas,t=e.getContext("2d"),r=Array.from("\u7530\u7531\u7532\u7533\u7534\u7535\u7536\u7537\u7538\u7539\u753a\u753b\u753c\u753d\u753e\u753f\u7540\u7541\u7542\u7543\u7544\u7545\u7546\u7547\u7548\u7549\u754a\u754b\u754c\u754d\u754e\u754f\u7550\u7551"),n=10,a=this.canvas.width/n,i=new Array(a).fill(1);this.rain=setInterval(function(){t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#0F0",t.font=n+"px arial",i.forEach(function(a,o){var c=r[Math.floor(Math.random()*r.length)];t.fillText(c,o*n,a*n),a*n>e.height&&Math.random()>.975&&(i[o]=0),i[o]++})},33)}},{key:"matrixCheck",value:function(){var e=this;this.props.movie._id&&["573a13a2f29313caabd0b8f3","573a139bf29313caabcf3d23","573a13a3f29313caabd0d923","573a13a7f29313caabd1a006"].includes(this.props.movie._id)&&(this.makeRainTimeout=setTimeout(function(){e.makeRain()},1500))}},{key:"componentDidMount",value:function(){var e=this;this.props.movieActions.fetchMovieByID(this.props.id,this.props.history),window.scrollTo(0,0);var t=this.canvas.getContext("2d"),r=this.poster;r.onload=function(){t.drawImage(r,0,0,300,444),e.matrixCheck()}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.rain),clearTimeout(this.makeRainTimeout)}},{key:"imgError",value:function(e){this.matrixCheck();var t=this.canvas.getContext("2d");t.font="20pt Calibri",t.textAlign="center",t.fillStyle="white",t.fillText("Image failed to load",150,222)}},{key:"handleUpdate",value:function(e,t){this.props.movieActions.editComment(e,t,this.props.user.auth_token,this.props.movie._id)}},{key:"handleDelete",value:function(e){this.props.movieActions.deleteComment(e,this.props.user.auth_token,this.props.movie._id)}},{key:"handleSearch",value:function(e,t){this.props.movieActions.searchMovies(e,t.target.innerHTML,this.props.history)}},{key:"handleViewClick",value:function(){this.props.movieActions.viewMovie()}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.movie,a=n.comments&&u.a.createElement("div",null,u.a.createElement("h2",{style:{color:$n}},"Comments"),u.a.createElement(Qn,{movieID:this.props.movie._id}),n.comments.map(function(t){return u.a.createElement(Kn,{handleUpdate:e.handleUpdate,handleDelete:e.handleDelete,cid:t._id,key:t._id,editable:t.email===e.props.user.info.email,name:t.name,date:t.date,text:t.text})})),i=n.runtime&&u.a.createElement("span",{style:{color:"white"}},"Runtime:"," ",u.a.createElement("span",{className:r.runtime},function(e){return"".concat(Math.floor(e/60)," hr ").concat(e%60," min")}(n.runtime))),o=n.directors&&u.a.createElement("div",{className:r.director},u.a.createElement("span",{style:{color:"white"}},"Directed by"," ",n.directors.map(function(e,t){return u.a.createElement("span",{key:t,className:r.directorText},e)}))),c=n.fullplot||n.plot?u.a.createElement("div",{className:r.plotContainer},u.a.createElement("div",{className:r.plot},n.fullplot||n.plot)):"",s=n.genres?u.a.createElement("div",null,u.a.createElement("h4",{className:r.skittlesHeader},"Genres"),u.a.createElement("div",{className:r.skittlesContainer},n.genres.map(function(t,n){return u.a.createElement("span",{key:n,className:r.genresSkittles,onClick:function(t){return e.handleSearch("genre",t)}},t)}))):"",l=n.cast?u.a.createElement("div",null,u.a.createElement("h4",{className:r.skittlesHeader},"Cast"),u.a.createElement("div",{className:r.skittlesContainer},n.cast.map(function(t,n){return u.a.createElement("span",{key:n,className:r.castSkittles,onClick:function(t){return e.handleSearch("cast",t)}},t)}))):"",d=n.writers?u.a.createElement("div",null,u.a.createElement("h4",{className:r.skittlesHeader},"Writers"),u.a.createElement("div",{className:r.skittlesContainer},n.writers.map(function(e,t){return u.a.createElement("span",{key:t,className:r.writerSkittles},e)}))):"";return u.a.createElement("div",null,u.a.createElement("div",{className:r.root},u.a.createElement(Vn,null),u.a.createElement("div",{className:r.half},u.a.createElement("p",{className:r.title},n.title),u.a.createElement("div",{className:r.infoContainer},u.a.createElement("span",{className:r.year},n.year),n.rated&&u.a.createElement("span",{className:r.rating},n.rated)),o,i,c,u.a.createElement(Rn,{ratings:ea(n)})),u.a.createElement("div",{className:r.half},u.a.createElement("canvas",{width:300,height:444,ref:function(t){e.canvas=t}},u.a.createElement("img",{ref:function(t){e.poster=t},src:n.poster||"",alt:n.title,onError:function(){return e.imgError()}})),u.a.createElement("div",{className:r.watchButton},u.a.createElement(_.a,{className:r.button,onClick:this.handleViewClick},"watch movie")),s,l,d),a))}}]),t}(s.Component);var na=Object(R.d)(Ct.a,Object(S.withStyles)(ta),Object(b.b)(function(e,t){var r=e.movies,n=r.movie,a=r.viewMovie,i=e.user;return{movie:n,id:t.match.params.id,displayModal:a,user:i}},function(e){return{movieActions:Object(R.b)(i,e)}}))(ra),aa=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).preferenceMapping={preferred_language:"Preferred Language",favorite_cast:"Favorite Cast"},r.textPreferences=["preferred_language","favorite_cast"],r.handleSelect=function(e){return function(t){r.props.userActions.updatePrefs(Object(ln.a)({},e,t.target.checked),r.props.user)}},r.handleChange=function(e){r.setState(Object(ln.a)({},e.target.id,e.target.value))},r.handleSelect=r.handleSelect.bind(Object(x.a)(Object(x.a)(r))),r.handleChange=r.handleChange.bind(Object(x.a)(Object(x.a)(r))),r.savePrefs=r.savePrefs.bind(Object(x.a)(Object(x.a)(r))),r.state=Object(P.a)({},e.user.info.preferences),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"savePrefs",value:function(){this.props.userActions.updatePrefs(this.state,this.props.user)}},{key:"loadSelectPrefs",value:function(){}},{key:"loadTextPrefs",value:function(){var e=this,t=this.props,r=t.classes,n=t.user;return Object.keys(n.info.preferences).filter(function(t){return e.textPreferences.includes(t)}).map(function(t){return u.a.createElement("div",{className:r.inputContainer,key:t},u.a.createElement(bn.a,{className:r.formControl},u.a.createElement(hn.a,{htmlFor:t,style:{color:"white"}},e.preferenceMapping[t]),u.a.createElement(pn.a,{id:t,value:e.state[t],onChange:e.handleChange,style:{color:"white"}})))})}},{key:"render",value:function(){var e=this.props,t=e.classes,r=e.user;return u.a.createElement("div",{className:t.root},u.a.createElement("div",{className:t.half},u.a.createElement("h2",{style:{color:"white"}},"Hello ",r.info.name),this.loadTextPrefs(),u.a.createElement(_.a,{className:t.buttonSave,onClick:this.savePrefs},u.a.createElement(A.a,{style:{textDecoration:"none",color:"white"},to:"/"},"save"))))}}]),t}(s.Component);var ia=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{display:"flex",background:"black",height:"100%",justifyContent:"space-around",width:"100vw",textAlign:"center",flexDirection:"row",flexFlow:"wrap"},half:{marginTop:"65px",minWidth:"450px",maxWidth:"45%",flexDirection:"column",alignItems:"center",flex:"0 0 auto",height:"100vh"},accountDelete:{},preferenceSelection:{display:"inline-flex",justifyContent:"center",width:"35vw",background:"#242424",padding:"10px"},formControl:{margin:e.spacing.unit},formLabel:{color:"white"},checked:{color:Pt.a[500],"& + $bar":{backgroundColor:Pt.a[500]}},inputContainer:{display:"flex",justifyContent:"center",background:"#242424"},bar:{},buttonSave:{margin:e.spacing.unit-2,height:"18px",color:"white",background:Pt.a[500]}}}),Object(b.b)(function(e){return{user:e.user}},function(e){return{userActions:Object(R.b)(n,e)}}))(aa);function oa(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("Connection")),e.next=3,ua();case 3:if(r=e.sent,n=Fr(0,Object.keys(r.filters).length),a=Fr(20,r.movies.length),i=Fr(23539,r.total_results),o=Fr(0,r.page),![n,a,i,o].every(function(e){return e})){e.next=12;break}return e.abrupt("return",t(ca()));case 12:return e.abrupt("return",t(sa(new Error("The return from the api was incorrect"))));case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}function ca(){return{type:ge}}function sa(e){return{type:ve,error:e}}var ua=function(){return lt("/api/v1/movies/",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})};function la(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("Projection")),e.next=4,ma();case 4:if(r=e.sent,n=Fr(505,r.titles.length),a=Fr(505,r.titles.filter(function(e){return 2===Object.keys(e).length}).length),![n,a].every(function(e){return e})){e.next=11;break}return e.abrupt("return",t(da()));case 11:return e.abrupt("return",t(pa(new Error("The return from the api was incorrect when searching by country"))));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",t(pa(new Error("The return from the api was incorrect when searching by country"))));case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()}function da(){return{type:Ee}}function pa(e){return{type:ke,error:e}}var ma=function(){return lt("/api/v1/movies/countries?countries=Australia",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})};function ha(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("TextAndSubfield")),e.prev=1,e.next=4,ka();case 4:return r=e.sent,e.next=7,wa();case 7:return n=e.sent,e.next=10,Oa();case 10:if(a=e.sent,![r,n,a].every(function(e){return e})){e.next=13;break}return e.abrupt("return",t(fa()));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",t(ga(e.t0)));case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t){return e.apply(this,arguments)}}()}function fa(){return{type:Oe}}function ga(e){return{type:ye,error:e}}var va=function(){var e=encodeURIComponent("Kevin Connolly");return lt("/api/v1/movies/search?cast=".concat(e),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},ba=function(){var e=encodeURI("shawshank");return lt("/api/v1/movies/search?text=".concat(e),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},Ea=function(){var e=encodeURI("Talk-Show");return lt("/api/v1/movies/search?genre=".concat(e),{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},ka=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,va();case 3:if(t=e.sent,r=Fr(2,t.movies.length),n=t.movies.pop(),a=112368===n.imdb.id,i=2===n.writers.length,o="Angus"===n.title,!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when searching by cast");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when searching by cast");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),wa=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ba();case 3:if(t=e.sent,r=Fr(2,t.movies.length),n=t.movies.pop(),a=111161===n.imdb.id,i=2===n.writers.length,o="The Shawshank Redemption"===n.title,!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when searching by text");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when searching by text");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),Oa=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ea();case 3:if(t=e.sent,console.log(t.movies.length),r=Fr(1,t.movies.length),n=t.movies.pop(),a=116835===n.imdb.id,i=3===n.writers.length,o="The Late Shift"===n.title,!(r&&a&&i&&o)){e.next=14;break}return e.abrupt("return",!0);case 14:throw new Error("Did not receive the proper response when searching by genre");case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Error("Did not receive the proper response when searching by genre");case 20:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}();function ya(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a,i,o,c;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("Paging")),e.prev=1,e.next=4,ja();case 4:return r=e.sent,e.next=7,xa();case 7:return n=e.sent,e.next=10,Aa();case 10:return a=e.sent,e.next=13,Ta();case 13:return i=e.sent,e.next=16,_a();case 16:return o=e.sent,e.next=19,Ma();case 19:if(c=e.sent,![r,n,a,i,o,c].every(function(e){return e})){e.next=22;break}return e.abrupt("return",t(Sa()));case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(1),e.abrupt("return",t(Ca(e.t0)));case 27:case"end":return e.stop()}},e,this,[[1,24]])}));return function(t){return e.apply(this,arguments)}}()}function Sa(){return{type:Ce}}function Ca(e){return{type:je,error:e}}var ja=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("cast","Morgan Freeman",0);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.movies.pop(),a=428803===n.imdb.id,i=4===n.writers.length,o="March of the Penguins"===n.title,!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by cast");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when paging by cast");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),xa=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("cast","Morgan Freeman",1);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.movies.pop(),a=1334555===n.imdb.id,i=1===n.writers.length,o="Prom Night in Mississippi"===n.title,!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by cast");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when paging by cast");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),Aa=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("genre","Action",0);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.movies.pop(),a=416449===n.imdb.id,i=5===n.writers.length,o="300"===n.title.toString(),!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by genre");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when paging by genre");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),Ta=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("genre","Action",5);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.movies.pop(),a=287978===n.imdb.id,i=1===n.writers.length,o="Daredevil"===n.title.toString(),!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by genre");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when paging by genre");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),_a=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("text","Heist",0);case 3:if(t=e.sent,r=Fr(20,t.movies.length),n=t.movies.pop(),a=95861===n.imdb.id,i=2===n.writers.length,o="The Doublecross"===n.title.toString(),!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by text");case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),new Error("Did not receive the proper response when paging by text");case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(zt.a)(Wt.a.mark(function e(){var t,r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr("text","Heist",5);case 3:if(t=e.sent,r=Fr(1,t.movies.length),n=t.movies.pop(),a=3139072===n.imdb.id,i=5===n.writers.length,o="Son of Batman"===n.title.toString(),!(r&&a&&i&&o)){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Did not receive the proper response when paging by text");case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Error("Did not receive the proper response when paging by text");case 19:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}();function Na(){var e=Hr();return function(){var t=Object(zt.a)(Wt.a.mark(function t(r){var n,a,i,o,c,s;return Wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(Gr("UserManagement")),t.prev=1,t.next=4,Jr(e);case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("invalid response to register");case 7:return t.next=9,Jr(e);case 9:if((a=t.sent).ok||console.log("\nHey there! The error response code was expected.\nIt's us testing if duplicate emails can register.\nGreat Job!"),!a.ok){t.next=13;break}throw new Error("duplicate emails should not be allowed");case 13:return i=n.json.auth_token,t.next=16,Br(i);case 16:if(t.sent.ok){t.next=19;break}throw new Error("invalid response to logout");case 19:return o=e.email,c=e.password,t.next=22,zr({email:o,password:c});case 22:if((s=t.sent).ok){t.next=25;break}throw new Error("invalid response to login");case 25:return i=s.json.auth_token,t.next=28,Wr(i,e);case 28:if(t.sent.ok){t.next=31;break}throw new Error("invalid response to delete");case 31:return t.abrupt("return",r(Ra()));case 34:return t.prev=34,t.t0=t.catch(1),t.abrupt("return",r(Pa(t.t0)));case 37:case"end":return t.stop()}},t,this,[[1,34]])}));return function(e){return t.apply(this,arguments)}}()}function Ra(){return{type:Me}}function Pa(e){return{type:Ne,error:e}}function Ia(){var e=Hr();return function(){var t=Object(zt.a)(Wt.a.mark(function t(r){var n,a,i,o,c;return Wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(Gr("UserPreferences")),t.prev=1,t.next=4,Jr(e);case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("invalid response to register");case 7:return a=n.json.auth_token,e.preferences={favorite_fruit:"watermelon",favorite_number:"42"},t.next=11,Va(a,e);case 11:if(t.sent.ok){t.next=14;break}throw new Error("invalid response to update preferences");case 14:return i=e.email,o=e.password,t.next=17,zr({email:i,password:o});case 17:if((c=t.sent).ok){t.next=20;break}throw new Error("invalid response to update preferences - login of user failed");case 20:if(void 0!==c.json&&void 0!==c.json.info){t.next=22;break}throw new Error("invalid response for user preferences");case 22:if(JSON.stringify(c.json.info.preferences)===JSON.stringify(e.preferences)){t.next=24;break}throw new Error("preferences weren't saved correctly");case 24:return t.next=26,Wr(a,e);case 26:if(t.sent.ok){t.next=29;break}throw new Error("invalid response to delete");case 29:return t.abrupt("return",r(Ua()));case 32:return t.prev=32,t.t0=t.catch(1),t.abrupt("return",r(Da(t.t0)));case 35:case"end":return t.stop()}},t,this,[[1,32]])}));return function(e){return t.apply(this,arguments)}}()}function Ua(){return{type:Pe}}function Da(e){return{type:Ie,error:e}}var Va=function(e,t){return dt("/api/v1/user/update-preferences",{method:"PUT",mode:"cors",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({preferences:t.preferences})}).then(function(e){return e}).catch(function(e){return e})},La="573a13a7f29313caabd1aa1f";function Fa(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("GetComments")),e.next=4,Zr(La);case 4:if(r=e.sent,!Fr(r.movie.comments.length,133)){e.next=10;break}return e.abrupt("return",t(Ga()));case 10:return e.abrupt("return",t(Ha(new Error("The return from the api was incorrect"))));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",t(Ha(new Error("The return from the api was incorrect"))));case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()}function Ga(){return{type:De}}function Ha(e){return{type:Ve,error:e}}var Wa="573a139af29313caabcf0b0a";function Ba(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a,i,o,c,s,u,l,d,p,m,h,f;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("CreateUpdateComments")),r=Hr(),e.next=5,Jr(r);case 5:return n=e.sent,a=n.json.auth_token,i=Hr(),e.next=10,Jr(i);case 10:return o=e.sent,c=o.json.auth_token,e.next=14,Xr(Wa,"feefee",a);case 14:if((d=e.sent).ok){e.next=19;break}throw new Error("Unable to post a comment");case 19:s=!0;case 20:e.prev=20,p=d.json.comments[0]._id,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(20),new Error("Unable to retrieve movie comments");case 27:return e.next=29,Yr(p,"badCommentText",c,Wa);case 29:if(!e.sent.ok){e.next=34;break}throw new Error("Was able to update a comment that wasn't owned");case 34:u=!0;case 35:return m="fazzlebizzle",e.next=38,Yr(p,m,a,Wa);case 38:if(!1!==e.sent.ok){e.next=43;break}throw new Error("Unable to update comment");case 43:l=!0;case 44:return e.next=46,Zr(Wa);case 46:h=e.sent,e.prev=47,f=h.movie.comments[0],e.next=54;break;case 51:throw e.prev=51,e.t1=e.catch(47),new Error("Unable to retrieve movie comments");case 54:if(f.text===m){e.next=56;break}throw new Error("Update was performed but unsuccessful");case 56:if(Kr(p,a,Wa),!(s&&u&&l)){e.next=63;break}return Wr(a,r),Wr(c,i),e.abrupt("return",t(za()));case 63:return e.abrupt("return",t(Ja(new Error("The return from the api was incorrect"))));case 64:e.next=69;break;case 66:return e.prev=66,e.t2=e.catch(0),e.abrupt("return",t(Ja(new Error(e.t2.message))));case 69:case"end":return e.stop()}},e,this,[[0,66],[20,24],[47,51]])}));return function(t){return e.apply(this,arguments)}}()}function za(){return{type:Fe}}function Ja(e){return{type:Ge,error:e}}var Za="573a13b7f29313caabd490b9";function Xa(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a,i,o,c,s,u,l,d,p,m,h,f;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("DeleteComments")),r=Hr(),e.next=5,Jr(r);case 5:return n=e.sent,a=n.json.auth_token,i=Hr(),e.next=10,Jr(i);case 10:return o=e.sent,c=o.json.auth_token,e.next=14,Xr(Za,"feefee",a);case 14:if((d=e.sent).ok){e.next=19;break}throw new Error("Unable to post a comment");case 19:s=!0;case 20:e.prev=20,p=d.json.comments[0]._id,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(20),new Error("Unable to retrieve movie comments");case 27:return e.next=29,Kr(p,c,Za);case 29:if(m=e.sent,e.prev=30,!m.ok){e.next=35;break}if(m.json.comments[0]._id===p){e.next=35;break}throw new Error("Was able to delete a comment that wasn't owned");case 35:u=!0,e.next=41;break;case 38:throw e.prev=38,e.t1=e.catch(30),e.t1;case 41:return e.next=43,Kr(p,a,Za);case 43:return e.next=45,Zr(Za);case 45:h=e.sent,e.prev=46,f=h.movie.comments[0]._id,e.next=53;break;case 50:throw e.prev=50,e.t2=e.catch(46),new Error("Unable to retrieve movie comments");case 53:if(f!==p){e.next=57;break}throw new Error("Deletion was performed but unsuccessful");case 57:l=!0;case 58:if(!(s&&u&&l)){e.next=64;break}return Wr(a,r),Wr(c,i),e.abrupt("return",t(Ya()));case 64:return e.abrupt("return",t(Ka(new Error("The return from the api was incorrect"))));case 65:e.next=70;break;case 67:return e.prev=67,e.t3=e.catch(0),e.abrupt("return",t(Ka(new Error(e.t3.message))));case 70:case"end":return e.stop()}},e,this,[[0,67],[20,24],[30,38],[46,50]])}));return function(t){return e.apply(this,arguments)}}()}function Ya(){return{type:We}}function Ka(e){return{type:Be,error:e}}var qa="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1MjIxNzI3NzMsIm5iZiI6MTUyMjE3Mjc3MywianRpIjoiYjFlYmI0ZDQtNjZlZS00MTY4LTg0MWQtZGNhODJkMThmN2NhIiwiZXhwIjoxNTIyMTczNjczLCJpZGVudGl0eSI6eyJlbWFpbCI6ImZvb2JhekBiYXIuY29tIiwibmFtZSI6ImZvbyBiYXIiLCJwYXNzd29yZCI6bnVsbCwicHJlZmVyZW5jZXMiOnsiZmF2b3JpdGVfY2FzdCI6Ik1lZyBSeWFuIiwicHJlZmVycmVkX2xhbmd1YWdlIjoiRW5nbGlzaCJ9fSwiZnJlc2giOmZhbHNlLCJ0eXBlIjoiYWNjZXNzIiwidXNlcl9jbGFpbXMiOnsidXNlciI6eyJlbWFpbCI6ImZvb2JhekBiYXIuY29tIiwibmFtZSI6ImZvbyBiYXIiLCJwYXNzd29yZCI6bnVsbCwicHJlZmVyZW5jZXMiOnsiZmF2b3JpdGVfY2FzdCI6Ik1lZyBSeWFuIiwicHJlZmVycmVkX2xhbmd1YWdlIjoiRW5nbGlzaCJ9fX19.q9z_tG7gEqaRMfrbTpj9Jz52vocqOBWgEpCd3KC6giI";function Qa(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r,n,a,i,o;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("UserReport")),r=Hr(),e.next=5,ri(r);case 5:return n=e.sent,a=n.auth_token,e.next=9,ti(qa);case 9:return i=e.sent,e.next=12,ti(a);case 12:if(o=e.sent,!i.ok){e.next=15;break}throw new Error("Invalid response to bad user report request");case 15:if(o.ok&&20===o.json.report.length){e.next=17;break}throw new Error("Invalid response to good user report request");case 17:return Wr(a,r),e.abrupt("return",t($a()));case 21:return e.prev=21,e.t0=e.catch(0),e.abrupt("return",t(ei(new Error(e.t0.message))));case 24:case"end":return e.stop()}},e,this,[[0,21]])}));return function(t){return e.apply(this,arguments)}}()}function $a(){return{type:Je}}function ei(e){return{type:Ze,error:e}}var ti=function(e){return dt("/api/v1/user/comment-report",{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e),"content-type":"application/json"}}).then(function(e){return e}).catch(function(e){return e})},ri=function(e){return lt("/api/v1/user/make-admin",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e}).catch(function(e){return e})},ni="573a13a5f29313caabd1333a";function ai(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Gr("Migration")),e.next=4,Zr(ni);case 4:if(r=e.sent,!(["<class 'datetime.datetime'>","java.util.Date","Date"].indexOf(r.updated_type)>-1)){e.next=10;break}return e.abrupt("return",t(ii()));case 10:return e.abrupt("return",t(oi(new Error("It does not appear that you correctly converted the type"))));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",t(oi(new Error("It does not appear that you correctly converted the type"))));case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()}function ii(){return{type:Ye}}function oi(e){return{type:Ke,error:e}}function ci(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("ConnectionPooling")),e.next=3,li();case 3:if(r=e.sent,![Fr(50,r.pool_size)].every(function(e){return e})){e.next=9;break}return e.abrupt("return",t(si()));case 9:return e.abrupt("return",t(ui(new Error("The return from the api was incorrect"))));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}function si(){return{type:Qe}}function ui(e){return{type:$e,error:e}}var li=function(){return lt("/api/v1/movies/config-options",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})};function di(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("Timeouts")),e.next=3,hi();case 3:if(r=e.sent,!Fr(2500,r.wtimeout)){e.next=9;break}return e.abrupt("return",t(pi()));case 9:return e.abrupt("return",t(mi(new Error("The return from the api was incorrect"))));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}function pi(){return{type:tt}}function mi(e){return{type:rt,error:e}}var hi=function(){return lt("/api/v1/movies/config-options",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})};function fi(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("ErrorHandling")),e.prev=1,e.next=4,bi();case 4:if("Not found"===e.sent.error){e.next=7;break}throw new Error;case 7:return e.abrupt("return",t(gi()));case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",t(vi(new Error("The return from the api was incorrect when providing a bad id to search by"))));case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()}function gi(){return{type:at}}function vi(e){return{type:it,error:e}}var bi=function(){return lt("/api/v1/movies/id/foobar",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})};function Ei(){return function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Gr("POLP")),e.next=3,Oi();case 3:if(r=e.sent,!("readWrite"===r.role)){e.next=9;break}return e.abrupt("return",t(ki()));case 9:return e.abrupt("return",t(wi(new Error("It doesn't appear you have configured the application user"))));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}function ki(){return{type:ct}}function wi(e){return{type:st,error:e}}var Oi=function(){return lt("/api/v1/movies/config-options",{method:"GET",mode:"cors"}).then(function(e){return e}).catch(function(e){return e})},yi=r(203),Si=r.n(yi),Ci=r(205),ji=r.n(Ci),xi=r(204),Ai=Xn.a[900],Ti=N.a[400],_i=function(e){function t(){var e,r;Object(p.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={beginValidating:!1},r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"onClickValidate",value:function(){this.setState({beginValidating:!0}),this.props.onClickValidate(this.props.ticketName)}},{key:"render",value:function(){var e=this,t=this.props;if(!this.state.beginValidating)return u.a.createElement("div",{className:t.classes.validationBar,onClick:function(){return e.onClickValidate()}},u.a.createElement("span",{className:t.classes.ticketLabel},t.ticketLabel),u.a.createElement("div",{className:t.classes.validationTicketWaiting},"Click to begin validation"));switch(t.ticketValidating){case!0:return u.a.createElement("div",{className:t.classes.validationBar},u.a.createElement("span",{className:t.classes.ticketLabel},t.ticketLabel),u.a.createElement("div",{className:t.classes.validationTicketWaiting},"Currently Validating"));default:return t.ticketError?u.a.createElement("div",{className:t.classes.validationBar,style:{background:Ai}},t.ticketLabel,": ",t.ticketErrorMessage):u.a.createElement("div",{className:t.classes.validationBar},u.a.createElement("span",{className:t.classes.ticketLabel},t.ticketLabel),u.a.createElement("div",{className:t.classes.validationTicket,style:{background:"#056705"}},t.ticketSuccess),u.a.createElement(xi.CopyToClipboard,{text:t.ticketSuccess},u.a.createElement(_.a,{onClick:t.copied,className:t.classes.copyButton},"Copy")))}}}]),t}(u.a.Component),Mi=Object(S.withStyles)(function(e){return{validationBar:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"50vw",marginTop:"15px",height:"40px"},validationTicket:{display:"flex",padding:"0 15px",height:"40px",justifyContent:"center",alignItems:"center",width:"30vw"},validationTicketWaiting:{display:"flex",padding:"0 15px",height:"40px",justifyContent:"center",alignItems:"center",width:"30vw",background:Ti},ticketLabel:{display:"flex",padding:"0 5px",background:"#e6e6e6",textAlign:"center",height:"40px",justifyContent:"center",alignItems:"center",width:"10vw"},copyButton:{height:"40px",color:"white",background:"#6b6b6b",justifyContent:"center",borderRadius:0,"&:hover":{background:"#6b6b6b"},width:"10vw"}}})(_i),Ni=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).interval=null,r.timeout=null,r.state={startValidation:!1,open:!1},r.copied=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.onClickValidate=r.onClickValidate.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.leaf.style.opacity-=.01},30),this.timeout=setTimeout(function(){e.readyName.style.display="none",e.leaf.style.display="none",clearInterval(e.interval),e.setState({startValidation:!0})},3500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearTimeout(this.timeout)}},{key:"onClickValidate",value:function(e){this.props.validationActions["validate".concat(e)]()}},{key:"render",value:function(){var e=this,t=this.props.user.loggedIn?"Ready ".concat(this.props.user.info.name):"Player One",r=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"Connection",ticketLabel:"Connection",ticketValidating:this.props.validate.validatingConnection,ticketError:this.props.validate.ConnectionError,ticketSuccess:this.props.validate.ConnectionSuccess,ticketErrorMessage:this.props.validate.ConnectionErrorMessage,copied:this.copied}),n=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"Projection",ticketLabel:"Projection",ticketValidating:this.props.validate.validatingProjection,ticketError:this.props.validate.ProjectionError,ticketSuccess:this.props.validate.ProjectionSuccess,ticketErrorMessage:this.props.validate.ProjectionErrorMessage,copied:this.copied}),a=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"TextAndSubfield",ticketLabel:"Text and Subfield Search",ticketValidating:this.props.validate.validatingTextAndSubfield,ticketError:this.props.validate.TextAndSubfieldError,ticketSuccess:this.props.validate.TextAndSubfieldSuccess,ticketErrorMessage:this.props.validate.TextAndSubfieldErrorMessage,copied:this.copied}),i=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"Paging",ticketLabel:"Paging",ticketValidating:this.props.validate.validatingPaging,ticketError:this.props.validate.PagingError,ticketSuccess:this.props.validate.PagingSuccess,ticketErrorMessage:this.props.validate.PagingErrorMessage,copied:this.copied}),o=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"FacetedSearch",ticketLabel:"Faceted Search",ticketValidating:this.props.validate.validatingFacetedSearch,ticketError:this.props.validate.FacetedSearchError,ticketSuccess:this.props.validate.FacetedSearchSuccess,ticketErrorMessage:this.props.validate.FacetedSearchErrorMessage,copied:this.copied}),c=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"UserManagement",ticketLabel:"User Management",ticketValidating:this.props.validate.validatingUserManagement,ticketError:this.props.validate.UserManagementError,ticketSuccess:this.props.validate.UserManagementSuccess,ticketErrorMessage:this.props.validate.UserManagementErrorMessage,copied:this.copied}),s=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"UserPreferences",ticketLabel:"User Preferences",ticketValidating:this.props.validate.validatingUserPreferences,ticketError:this.props.validate.UserPreferencesError,ticketSuccess:this.props.validate.UserPreferencesSuccess,ticketErrorMessage:this.props.validate.UserPreferencesErrorMessage,copied:this.copied}),l=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"GetComments",ticketLabel:"Get Comments",ticketValidating:this.props.validate.validatingGetComments,ticketError:this.props.validate.GetCommentsError,ticketSuccess:this.props.validate.GetCommentsSuccess,ticketErrorMessage:this.props.validate.GetCommentsErrorMessage,copied:this.copied}),d=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"CreateUpdateComments",ticketLabel:"Create/Update Comments",ticketValidating:this.props.validate.validatingCreateUpdateComments,ticketError:this.props.validate.CreateUpdateCommentsError,ticketSuccess:this.props.validate.CreateUpdateCommentsSuccess,ticketErrorMessage:this.props.validate.CreateUpdateCommentsErrorMessage,copied:this.copied}),p=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"DeleteComments",ticketLabel:"Delete Comments",ticketValidating:this.props.validate.validatingDeleteComments,ticketError:this.props.validate.DeleteCommentsError,ticketSuccess:this.props.validate.DeleteCommentsSuccess,ticketErrorMessage:this.props.validate.DeleteCommentsErrorMessage,copied:this.copied}),m=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"UserReport",ticketLabel:"User Report",ticketValidating:this.props.validate.validatingUserReport,ticketError:this.props.validate.UserReportError,ticketSuccess:this.props.validate.UserReportSuccess,ticketErrorMessage:this.props.validate.UserReportErrorMessage,copied:this.copied}),h=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"Migration",ticketLabel:"Migration",ticketValidating:this.props.validate.validatingMigration,ticketError:this.props.validate.MigrationError,ticketSuccess:this.props.validate.MigrationSuccess,ticketErrorMessage:this.props.validate.MigrationErrorMessage,copied:this.copied}),f=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"ConnectionPooling",ticketLabel:"Connection Pooling",ticketValidating:this.props.validate.validatingConnectionPooling,ticketError:this.props.validate.ConnectionPoolingError,ticketSuccess:this.props.validate.ConnectionPoolingSuccess,ticketErrorMessage:this.props.validate.ConnectionPoolingErrorMessage,copied:this.copied}),g=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"Timeouts",ticketLabel:"Timeouts",ticketValidating:this.props.validate.validatingTimeouts,ticketError:this.props.validate.TimeoutsError,ticketSuccess:this.props.validate.TimeoutsSuccess,ticketErrorMessage:this.props.validate.TimeoutsErrorMessage,copied:this.copied}),v=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"ErrorHandling",ticketLabel:"Error Handling",ticketValidating:this.props.validate.validatingErrorHandling,ticketError:this.props.validate.ErrorHandlingError,ticketSuccess:this.props.validate.ErrorHandlingSuccess,ticketErrorMessage:this.props.validate.ErrorHandlingErrorMessage,copied:this.copied}),b=u.a.createElement(Mi,{onClickValidate:this.onClickValidate,ticketName:"POLP",ticketLabel:"Principle of Least Privilege",ticketValidating:this.props.validate.validatingPOLP,ticketError:this.props.validate.POLPError,ticketSuccess:this.props.validate.POLPSuccess,ticketErrorMessage:this.props.validate.POLPErrorMessage,copied:this.copied}),E=this.state.startValidation?u.a.createElement("div",null,u.a.createElement("div",null,r),u.a.createElement("div",null,n),u.a.createElement("div",null,a),u.a.createElement("div",null,i),u.a.createElement("div",null,o)):"",k=this.state.startValidation?u.a.createElement("div",null,u.a.createElement("div",null,c),u.a.createElement("div",null,s),u.a.createElement("div",null,l),u.a.createElement("div",null,d),u.a.createElement("div",null,p),u.a.createElement("div",null,m),u.a.createElement("div",null,h),u.a.createElement("div",null,f),u.a.createElement("div",null,g),u.a.createElement("div",null,v),u.a.createElement("div",null,b)):"",w=this.state.startValidation?u.a.createElement("div",null,u.a.createElement("div",null,E),u.a.createElement("div",null,k)):"";return u.a.createElement("div",{className:this.props.classes.root},u.a.createElement("div",{ref:function(t){e.readyName=t},className:this.props.classes.inner},t),u.a.createElement("img",{ref:function(t){return e.leaf=t},style:{opacity:1},className:this.props.classes.leaf,src:Si.a,alt:""}),w,u.a.createElement(ji.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,onClose:this.handleClose,autoHideDuration:1e3,SnackbarContentProps:{"aria-describedby":"Copied"},message:u.a.createElement("span",{id:"message-id"},"Copied!")}))}}]),t}(s.Component);var Ri=Object(R.d)(Object(S.withStyles)(function(e){return{root:{flex:1,flexWrap:"wrap",justifyContent:"center",backgroundColor:"black",width:"100vw",minHeight:"100vh",height:"100%",flexBasis:0,textAlign:"center",paddingTop:"15px",alignItems:"center"},inner:{color:"red",fontSize:"64px",fontFamily:"'Press Start 2P', cursive",textAlign:"center",textStroke:"1px",textShadow:"3px 3px 0 green, -1px -1px 0 blue, 1px -1px 0 blue, -1px 1px 0 blue, 1px 1px 0 blue",paddingTop:"15px",animation:"blink 1s linear 3 forwards"},leaf:{marginTop:"15px",animation:"spinningLeaf 2s linear 0s infinite"}}}),Object(b.b)(function(e){return{user:e.user,validate:e.validate}},function(e){return{validationActions:Object(R.b)(o,e)}}))(Ni),Pi=r(208),Ii=r.n(Pi),Ui=r(139),Di=r.n(Ui),Vi=r(206),Li=r.n(Vi),Fi=r(138),Gi=r.n(Fi),Hi=r(72),Wi=r.n(Hi),Bi=r(207),zi=r.n(Bi),Ji=Pt.a[500],Zi=function(e){function t(e){var r;return Object(p.a)(this,t),(r=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={searchText:"",selected:!1,defaultValue:"search by parameter",value:"text"},r.handleChange=r.handleChange.bind(Object(x.a)(Object(x.a)(r))),r.handleSearch=r.handleSearch.bind(Object(x.a)(Object(x.a)(r))),r.handleSelection=r.handleSelection.bind(Object(x.a)(Object(x.a)(r))),r.fireSearch=r.fireSearch.bind(Object(x.a)(Object(x.a)(r))),r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleSelection",value:function(e,t){this.setState({value:t})}},{key:"fireSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.props.movieActions.searchMovies(e,this.state.searchText,this.props.history,t)}},{key:"handleSearch",value:function(){var e=Object(zt.a)(Wt.a.mark(function e(t){var r;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.miscActions.toggleDrawer(),e.t0=this.state.value,e.next="country"===e.t0?4:"genre"===e.t0?5:"cast"===e.t0?6:16;break;case 4:return e.abrupt("return",this.props.movieActions.searchCountries(this.state.searchText,this.props.history));case 5:return e.abrupt("return",this.fireSearch("genre"));case 6:return e.prev=6,e.next=9,$r();case 9:return r=e.sent,e.abrupt("return",this.fireSearch("cast",r));case 13:return e.prev=13,e.t1=e.catch(6),e.abrupt("return",this.fireSearch("cast"));case 16:return e.abrupt("return",this.fireSearch("text"));case 17:case"end":return e.stop()}},e,this,[[6,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({searchText:e.target.value})}},{key:"render",value:function(){var e=this.props.classes;return u.a.createElement("div",null,u.a.createElement("div",{className:e.container},u.a.createElement(bn.a,{className:e.formControl},u.a.createElement(Li.a,{id:"searchText",placeholder:this.state.defaultValue,value:this.state.searchText,onChange:this.handleChange,InputProps:{disableUnderline:!0,classes:{root:e.textFieldRoot,input:e.textFieldInput}},InputLabelProps:{shrink:!0,className:e.textFieldFormLabel}}),u.a.createElement(_.a,{className:e.button,onClick:this.handleSearch},"search"))),u.a.createElement("div",null,u.a.createElement(bn.a,null,u.a.createElement(zi.a,{"aria-label":"searchType",name:"searchType",className:e.group,value:this.state.value,onChange:this.handleSelection},u.a.createElement(Nr.a,{classes:{label:e.label},value:"text",control:u.a.createElement(Wi.a,{style:{color:"white"}}),label:"Text"}),u.a.createElement(Nr.a,{classes:{label:e.label},value:"country",control:u.a.createElement(Wi.a,{style:{color:"white"}}),label:"Country"}),u.a.createElement(Nr.a,{classes:{label:e.label},value:"genre",control:u.a.createElement(Wi.a,{style:{color:"white"}}),label:"Genre"}),u.a.createElement(Nr.a,{classes:{label:e.label},value:"cast",control:u.a.createElement(Wi.a,{style:{color:"white"}}),label:"Cast"})))))}}]),t}(s.Component);var Xi=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{container:{display:"inline-flex",alignItems:"center"},formControl:{flexDirection:"row"},inputLabelFocused:{color:Gi.a[500]},inputInkbar:{"&:after":{backgroundColor:Gi.a[500]}},textFieldRoot:{padding:0},textFieldInput:{borderRadius:"4px 0 0 4px",backgroundColor:e.palette.common.white,color:"black",fontSize:16,padding:"10px 12px",width:"15rem",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},height:"20px"},button:{input:{display:"none"},borderRadius:"0 4px 4px 0",color:"white",padding:"10px 0",background:Ji,width:"30px",display:"inline-flex"},group:{display:"inline-flex",flexDirection:"row"},label:{color:"white"},radio:{color:"white"}}}),Object(b.b)(function(){return{}},function(e){return{movieActions:Object(R.b)(i,e),miscActions:Object(R.b)(a,e)}}))(Zi),Yi=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=u.a.createElement("div",{className:e.root},u.a.createElement(Di.a,{className:e.divider}),u.a.createElement(Xi,null),u.a.createElement(Di.a,{className:e.divider}));return u.a.createElement(Ii.a,{open:this.props.misc.open,onClose:this.props.miscActions.toggleDrawer},u.a.createElement("div",{tabIndex:0,role:"button"},t))}}]),t}(u.a.Component);var Ki=Object(R.d)(Object(S.withStyles)(function(e){return{root:{display:"flex",flexDirection:"column",background:"#262626",height:"100vh"},divider:{marginTop:"15px"}}}),Object(b.b)(function(e){var t=e.misc,r=e.movies;return r.facets,r.facetFilters,{misc:t}},function(e){return{miscActions:Object(R.b)(a,e)}}))(Yi),qi=Object(R.d)(Object(S.withStyles)(function(e){return{loading:{display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"black",alignItems:"center",width:"100vw",height:"100vh"}}}),Object(b.b)(function(e){return{user:e.user,misc:e.misc}}))(function(e){var t=e.component,r=e.redirectRoute,n=e.user,a=e.misc,i=e.classes,o=Object(w.a)(e,["component","redirectRoute","user","misc","classes"]);return a.checkingAdminStatus?u.a.createElement("div",{className:i.loading},u.a.createElement(Ar.a,null)):u.a.createElement(v.a,Object.assign({},o,{render:function(e){return n.isAdmin?u.a.createElement(t,e):u.a.createElement(O.a,{to:r})}}))});function Qi(e,t){return function(r){return r($i()),lt("/api/v1/user/comment-report",{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e.auth_token)}}).then(function(e){return r(eo(e))}).then(function(){return t.push("/user-report")}).catch(function(e){return t.push("/login")})}}function $i(){return{type:te}}function eo(e){var t=e.report;return{type:ne,report:t}}function to(e){return{type:re,report:e}}var ro=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(){this.props.reportActions.fetchReport(this.props.user,this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.classes;return u.a.createElement("div",{className:t.root},u.a.createElement(_.a,{className:t.button,onClick:function(){return e.handleClick()}},"User Report"))}}]),t}(s.Component);var no=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{flex:1,flexWrap:"wrap",justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",minHeight:"100vh",height:"100%",flexBasis:0},button:{input:{display:"none"},color:"white",padding:"10px",background:Pt.a[500],display:"inline-flex",margin:e.spacing.unit-2}}}),Object(b.b)(function(e){return{user:e.user}},function(e){return{reportActions:Object(R.b)(c,e)}}))(ro),ao=(r(480),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.report&&0!==this.props.report.length||this.props.reportActions.fetchReport(this.props.user,this.props.history)}},{key:"render",value:function(){var e=this.props,t=e.report,r=e.classes,n=t.map(function(e,t){return u.a.createElement("li",{className:r.li,key:e._id},"# ".concat(t+1," with ").concat(e.count," comments: ").concat(e._id))});return u.a.createElement("div",{className:r.root},u.a.createElement("ul",{className:r.ul},n))}}]),t}(s.Component));var io=Object(R.d)(Ct.a,Object(S.withStyles)(function(e){return{root:{display:"flex",flex:1,flexWrap:"wrap",justifyContent:"center",backgroundColor:"black",alignContent:"center",width:"100vw",minHeight:"100vh",height:"100%",flexBasis:0},ul:{listStyle:"none",textAlign:"center"},li:{fontSize:"1.5em",color:"white"}}}),Object(b.b)(function(e){return{report:e.report.report,user:e.user}},function(e){return{reportActions:Object(R.b)(c,e)}}))(ao),oo=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{id:"full",style:{overflowX:"hidden"}},u.a.createElement(Gt,null),u.a.createElement(Ki,null),u.a.createElement(br,null),u.a.createElement(k,null,u.a.createElement(qi,{path:"/admin",component:no,redirectRoute:"/login"}),u.a.createElement(v.a,{exact:!0,path:"/",component:cn}),u.a.createElement(v.a,{exact:!0,path:"/movies/id/:id",component:na}),u.a.createElement(v.a,{exact:!0,path:"/country-results",component:un}),u.a.createElement(y,{path:"/account",component:ia,redirectRoute:"/login"}),u.a.createElement(v.a,{exact:!0,path:"/account",component:ia}),u.a.createElement(v.a,{path:"/status",component:Ri}),u.a.createElement(v.a,{path:"/login",component:xn}),u.a.createElement(v.a,{path:"/signup",component:Nn}),u.a.createElement(v.a,{path:"/user-report",component:io})))}}]),t}(s.Component),co=r(209),so={movies:[],page:0,movie:{},filters:{},facets:{rating:[],runtime:[]},entries_per_page:0,total_results:0,viewMovie:!1,apiError:!1,fetchMovieFailure:!1,searchMovieFailure:!1,paging:!1,titles:[],facetFilters:{rating:{},runtime:{}},shownMovies:[]},uo=function(e,t){var r={};return e.forEach(function(e){e&&(r[e._id]=e.count)}),t.forEach(function(e){void 0!==r[e._id]?r[e._id]+=e.count:r[e._id]=e.count}),Object.keys(r).map(function(e){return{_id:e,count:r[e]}})},lo=function(e,t){var r=t.rating,n=t.runtime,a=e.slice();if(Object.keys(r).length||Object.keys(n).length){var i=[].concat(Object(Bt.a)(Object.keys(r).map(function(e){return r[e]})),Object(Bt.a)(Object.keys(n).map(function(e){return n[e]})));a=a.filter(function(e){return i.some(function(t){return t(e)})})}return a};function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:case $:return Object(P.a)({},e,{movie:Object(P.a)({},e.movie,{comments:t.comments})});case q:var r=e.facetFilters,n=t.payload,a=n.facet,i=n.key,o=n.filter;return void 0!==r[a][i]?delete r[a][i]:r[a][i]=o,Object(P.a)({},e,{facetFilters:{runtime:r.runtime,rating:r.rating},shownMovies:lo(e.movies,r)});case K:return Object(P.a)({},e,{paging:!0});case H:return Object(P.a)({},e,{movie:e.movies.filter(function(e){return e._id===t.movie}).pop()});case G:return Object(P.a)({},e,{movies:t.movies,page:t.page,filters:t.filters,entries_per_page:t.entries_per_page,total_results:t.total_results,shownMovies:lo(t.movies,e.facetFilters)});case W:return Object(P.a)({},e,{movies:t.movies,page:t.page,filters:t.filters,entries_per_page:t.entries_per_page,total_results:t.total_results,facets:{rating:t.facets&&t.facets.rating||[],runtime:t.facets&&t.facets.runtime||[]},shownMovies:lo(t.movies,e.facetFilters)});case F:return Object(P.a)({},e,{titles:t.titles});case Y:return Object(P.a)({},e,{movies:t.movies,page:t.page,filters:t.filters,entries_per_page:t.entries_per_page,paging:!1,facets:{rating:t.facets&&uo(e.facets.rating,t.facets.rating)||[],runtime:t.facets&&uo(e.facets.runtime,t.facets.runtime)||[]},shownMovies:lo(t.movies,e.facetFilters)});case J:return Object(P.a)({},e,{movie:t.movie});case Z:return Object(P.a)({},e,{viewMovie:!e.viewMovie});default:return e}}var mo={userErrName:"",userErrPassword:"",userErrEmail:"",fetchMovieErrMsg:"",searchMovieErrMsg:"",searchCountriesErrMsg:"",fetchMovieByIDErrMsg:""};function ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:var r=Object(P.a)({},e,Object(ln.a)({},t.key,""));return Object(P.a)({},r);case G:return r=Object(P.a)({},e,{fetchMovieErrMsg:""}),Object(P.a)({},r);case W:return r=Object(P.a)({},e,{searchMovieErrMsg:""}),Object(P.a)({},r);case F:return r=Object(P.a)({},e,{searchCountriesErrMsg:""}),Object(P.a)({},r);case J:return r=Object(P.a)({},e,{fetchMovieByIDErrMsg:""}),Object(P.a)({},r);case oe:return r=Object(P.a)({},e,{userErrMsg:""}),Object(P.a)({},r);case ce:var n=t.error.error.error;return Object(P.a)({},e,{userErrName:n.name||"",userErrPassword:n.password||"",userErrEmail:n.email||"",userErrMsg:"Unauthorized"===n?"Invalid username or password":""});case z:return Object(P.a)({},e,{fetchMovieByIDErrMsg:t.error});case U:return Object(P.a)({},e,{fetchMovieErrMsg:t.error});case V:return console.log("search failure! ",t.error),Object(P.a)({},e,{searchMovieErrMsg:t.error});case L:return Object(P.a)({},e,{searchCountriesErrMsg:t.error});default:return e}}var fo={};function go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case D:case X:case B:return t;default:return e}}var vo,bo={auth_token:"",info:{preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1};try{vo=Object(P.a)({},bo,function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}())}catch(Do){vo=bo}function Eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:var r;return r=t.user.info.preferences?t.user.info.preferences:bo.info.preferences,{auth_token:t.user.auth_token,info:Object(P.a)({},e.info,t.user.info,{preferences:Object(P.a)({},e.info.preferences,r)}),loggedIn:!0};case se:return bo;case ue:return Object(P.a)({},e,{info:Object(P.a)({},e.info,{preferences:Object(P.a)({},e.info.preferences,t.preferences)})});case me:return Object(P.a)({},e,{isAdmin:!1});case pe:return Object(P.a)({},e,{isAdmin:!0});default:return e}}var ko={open:!1,checkingAdminStatus:!1};function wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko;switch((arguments.length>1?arguments[1]:void 0).type){case ae:return Object(P.a)({},e,{open:!e.open});case de:return console.log("checking admin begin"),Object(P.a)({},e,{checkingAdminStatus:!0});case me:case pe:return console.log("checking admin end"),Object(P.a)({},e,{checkingAdminStatus:!1});default:return e}}var Oo={hasWeek1Errors:!1,hasWeek2Errors:!1,validatingConnection:!1,validatingProjection:!1,validatingTextAndSubfield:!1,validatingPaging:!1,validatingFacetedSearch:!1,validatingUserManagement:!1,validatingUserPreferences:!1,validatingGetComments:!1,validatingCreateUpdateComments:!1,validatingDeleteComments:!1,validatingUserReport:!1,validatingMigration:!1,validatingConnectionPooling:!1,validatingTimeouts:!1,validatingErrorHandling:!1,validatingPOLP:!1,week1Validating:!1,week2Validating:!1,ConnectionError:!1,ProjectionError:!1,TextAndSubfieldError:!1,PagingError:!1,FacetedSearchError:!1,UserManagementError:!1,UserPreferencesError:!1,GetCommentsError:!1,CreateUpdateCommentsError:!1,DeleteCommentsError:!1,UserReportError:!1,MigrationError:!1,ConnectionPoolingError:!1,TimeoutsError:!1,ErrorHandlingError:!1,POLPError:!1,ConnectionErrorMessage:"",ProjectionErrorMessage:"",TextAndSubfieldErrorMessage:"",PagingErrorMessage:"",FacetedSearchErrorMessage:"",UserManagementErrorMessage:"",UserPreferencesErrorMessage:"",GetCommentsErrorMessage:"",CreateUpdateCommentsErrorMessage:"",DeleteCommentsErrorMessage:"",UserReportErrorMessage:"",MigrationErrorMessage:"",ConnectionPoolingErrorMessage:"",TimeoutsErrorMessage:"",ErrorHandlingErrorMessage:"",POLPErrorMessage:"",ConnectionSuccess:"5a9026003a466d5ac6497a9d",ProjectionSuccess:"5a94762f949291c47fa6474d",TextAndSubfieldSuccess:"5a96a6a29c453a40d04922cc",PagingSuccess:"5a9824d057adff467fb1f526",FacetedSearchSuccess:"5aa7d3948adcc3fb770f06fb",UserManagementSuccess:"5a8d8ee2f9588ca2701894be",UserPreferencesSuccess:"5aabe31503ac76bc4f73e267",GetCommentsSuccess:"5ab5094fb526e43b570e4633",CreateUpdateCommentsSuccess:"5aba8d5113910c25d7058f8f",DeleteCommentsSuccess:"5ac25c280a80ed6e67e1cecb",UserReportSuccess:"5accad3272455e5db79e4dad",MigrationSuccess:"5ad9f6a64fec134d116fb06f",ConnectionPoolingSuccess:"5ad4f4f58d4b377bcf55d742",TimeoutsSuccess:"5addf035498efdeb55e90b01",ErrorHandlingSuccess:"5ae9b76a703c7c603202ef22",POLPSuccess:"5b61be29094dbae03bf30616"},yo=function(e){return e.ConnectionError||e.ProjectionError||e.TextAndSubfieldError||e.PagingError||e.FacetedSearchError},So=function(e){return e.validatingConnection||e.validatingProjection||e.validatingTextAndSubfield||e.validatingPaging||e.validatingFacetedSearch},Co=function(e){return e.validatingUserManagement||e.validatingUserPreferences||e.validatingGetComments||e.validatingCreateUpdateComments||e.validatingDeleteComments||e.validatingUserReport||e.validatingMigration||e.validatingConnectionPooling||e.validatingTimeouts||e.validatingErrorHandling||e.validateingPOLP},jo=function(e){return e.UserManagementError||e.UserPreferencesError||e.GetCommentsError||e.CreateUpdateCommentsError||e.DeleteCommentsError||e.UserReportError||e.MigrationError||e.ConnectionPoolingError||e.TimeoutsError||e.ErrorHandlingError||e.POLPError};function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return Object(P.a)({},e,Object(ln.a)({},"validating".concat(t.ticket),!0));case fe:case be:case we:case Se:case xe:case _e:case Re:case Ue:case Le:case He:case ze:case Xe:case qe:case et:case nt:case ot:return t;case ge:var r=Object(P.a)({},e,{ConnectionSuccess:Oo.ConnectionSuccess,ConnectionError:!1,ConnectionErrorMessage:"",validatingConnection:!1});return Object(P.a)({},r,{hasWeek1Errors:yo(r),week1Validating:So(r)});case Ee:return r=Object(P.a)({},e,{ProjectionSuccess:Oo.ProjectionSuccess,ProjectionError:!1,ProjectionErrorMessage:"",validatingProjection:!1}),Object(P.a)({},r,{hasWeek1Errors:yo(r),week1Validating:So(r)});case Oe:return r=Object(P.a)({},e,{TextAndSubfieldSuccess:Oo.TextAndSubfieldSuccess,TextAndSubfieldError:!1,TextAndSubfieldErrorMessage:"",validatingTextAndSubfield:!1}),Object(P.a)({},r,{hasWeek1Errors:yo(r),week1Validating:So(r)});case Ce:return r=Object(P.a)({},e,{PagingSuccess:Oo.PagingSuccess,PagingError:!1,PagingErrorMessage:"",validatingPaging:!1}),Object(P.a)({},r,{hasWeek1Errors:yo(r),week1Validating:So(r)});case Ae:return r=Object(P.a)({},e,{FacetedSearchSuccess:Oo.FacetedSearchSuccess,FacetedSearchError:!1,FacetedSearchErrorMessage:"",validatingFacetedSearch:!1}),Object(P.a)({},r,{hasWeek1Errors:yo(r),week1Validating:So(r)});case Me:return r=Object(P.a)({},e,{UserManagementSuccess:Oo.UserManagementSuccess,UserManagementError:!1,UserManagementErrorMessage:"",validatingUserManagement:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case Pe:return r=Object(P.a)({},e,{UserPreferencesSuccess:Oo.UserPreferencesSuccess,UserPreferencesError:!1,UserPreferencesErrorMessage:"",validatingUserPreferences:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case De:return r=Object(P.a)({},e,{GetCommentsSuccess:Oo.GetCommentsSuccess,GetCommentsError:!1,GetCommentsErrorMessage:"",validatingGetComments:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case Fe:return r=Object(P.a)({},e,{CreateUpdateCommentsSuccess:Oo.CreateUpdateCommentsSuccess,CreateUpdateCommentsError:!1,CreateUpdateCommentsErrorMessage:"",validatingCreateUpdateComments:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case We:return r=Object(P.a)({},e,{DeleteCommentsSuccess:Oo.DeleteCommentsSuccess,DeleteCommentsError:!1,DeleteCommentsErrorMessage:"",validatingDeleteComments:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case Je:return r=Object(P.a)({},e,{UserReportSuccess:Oo.UserReportSuccess,UserReportError:!1,UserReportErrorMessage:"",validatingUserReport:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case Ye:return r=Object(P.a)({},e,{MigrationSuccess:Oo.MigrationSuccess,MigrationError:!1,MigrationErrorMessage:"",validatingMigration:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case Qe:return r=Object(P.a)({},e,{ConnectionPoolingSuccess:Oo.ConnectionPoolingSuccess,ConnectionPoolingError:!1,ConnectionPoolingErrorMessage:"",validatingConnectionPooling:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case tt:return r=Object(P.a)({},e,{TimeoutsSuccess:Oo.TimeoutsSuccess,TimeoutsError:!1,TimeoutsErrorMessage:"",validatingTimeouts:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case at:return r=Object(P.a)({},e,{ErrorHandlingSuccess:Oo.ErrorHandlingSuccess,ErrorHandlingError:!1,ErrorHandlingErrorMessage:"",validatingErrorHandling:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case ct:return r=Object(P.a)({},e,{POLPSuccess:Oo.POLPSuccess,POLPError:!1,POLPErrorMessage:"",validatingPOLP:!1}),Object(P.a)({},r,{hasWeek2Errors:jo(e),week2Validating:Co(r)});case ve:return r=Object(P.a)({},e,{ConnectionError:!0,ConnectionSuccess:"",ConnectionErrorMessage:t.error.message,hasWeek1Errors:!0,validatingConnection:!1}),Object(P.a)({},r,{week1Validating:So(r)});case ke:return r=Object(P.a)({},e,{ProjectionError:!0,ProjectionSuccess:"",ProjectionErrorMessage:t.error.message,hasWeek1Errors:!0,validatingProjection:!1}),Object(P.a)({},r,{week1Validating:So(r)});case ye:return r=Object(P.a)({},e,{TextAndSubfieldError:!0,TextAndSubfieldSuccess:"",TextAndSubfieldErrorMessage:t.error.message,hasWeek1Errors:!0,validatingTextAndSubfield:!1}),Object(P.a)({},r,{week1Validating:So(r)});case je:return r=Object(P.a)({},e,{PagingError:!0,PagingSuccess:"",PagingErrorMessage:t.error.message,hasWeek1Errors:!0,validatingPaging:!1}),Object(P.a)({},r,{week1Validating:So(r)});case Te:return r=Object(P.a)({},e,{FacetedSearchError:!0,FacetedSearchSuccess:"",FacetedSearchErrorMessage:t.error.message,hasWeek1Errors:!0,validatingFacetedSearch:!1}),Object(P.a)({},r,{week1Validating:So(r)});case Ne:return r=Object(P.a)({},e,{UserManagementError:!0,UserManagementSuccess:"",UserManagementErrorMessage:t.error.message,hasWeek2Errors:!0,validatingUserManagement:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Ie:return r=Object(P.a)({},e,{UserPreferencesError:!0,UserPreferencesSuccess:"",UserPreferencesErrorMessage:t.error.message,hasWeek2Errors:!0,validatingUserPreferences:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Ve:return r=Object(P.a)({},e,{GetCommentsError:!0,GetCommentsSuccess:"",GetCommentsErrorMessage:t.error.message,hasWeek2Errors:!0,validatingGetComments:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Ge:return r=Object(P.a)({},e,{CreateUpdateCommentsError:!0,CreateUpdateCommentsSuccess:"",CreateUpdateCommentsErrorMessage:t.error.message,hasWeek2Errors:!0,validatingCreateUpdateComments:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Be:return r=Object(P.a)({},e,{DeleteCommentsError:!0,DeleteCommentsSuccess:"",DeleteCommentsErrorMessage:t.error.message,hasWeek2Errors:!0,validatingDeleteComments:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Ze:return r=Object(P.a)({},e,{UserReportError:!0,UserReportSuccess:"",UserReportErrorMessage:t.error.message,hasWeek2Errors:!0,validatingUserReport:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case Ke:return r=Object(P.a)({},e,{MigrationError:!0,MigrationSuccess:"",MigrationErrorMessage:t.error.message,hasWeek2Errors:!0,validatingMigration:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case $e:return r=Object(P.a)({},e,{ConnectionPoolingError:!0,ConnectionPoolingSuccess:"",ConnectionPoolingErrorMessage:t.error.message,hasWeek2Errors:!0,validatingConnectionPooling:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case rt:return r=Object(P.a)({},e,{TimeoutsError:!0,TimeoutsSuccess:"",TimeoutsErrorMessage:t.error.message,hasWeek2Errors:!0,validatingTimeouts:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case it:return r=Object(P.a)({},e,{ErrorHandlingError:!0,ErrorHandlingSuccess:"",ErrorHandlingErrorMessage:t.error.message,hasWeek2Errors:!0,validatingErrorHandling:!1}),Object(P.a)({},r,{week2Validating:Co(r)});case st:return r=Object(P.a)({},e,{POLPError:!0,POLPSuccess:"",POLPErrorMessage:t.error.message,hasWeek2Errors:!0,validatingPOLP:!1}),Object(P.a)({},r,{week2Validating:Co(r)});default:return e}}var Ao={fetching:!1,report:[]};function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{report:[],fetching:!1};case ne:return{report:t.report,fetching:!1};case te:return Object(P.a)({},e,{fetching:!0});default:return e}}var _o=r(107),Mo=r.n(_o),No=r(71),Ro=Mo()(),Po=Object(No.b)(Ro);var Io=Mo()(),Uo=Object(R.e)(Object(R.c)({report:To,misc:wo,validate:xo,user:Eo,errors:ho,movies:po,fetches:go,router:No.c}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(R.a)(co.a,Po));Uo.subscribe(kr()(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(r){}}(Uo.getState().user)},1e3)),d.a.render(u.a.createElement(b.a,{store:Uo},u.a.createElement(No.a,{history:Io},u.a.createElement(oo,null))),document.getElementById("root"))}},[[211,2,1]]]);
//# sourceMappingURL=main.a01f0687.chunk.js.map